(function(n){var kt="images/icon/button/icon_toc.png",dt="images/icon/button/icon_thumbs.png",gt="images/icon/button/icon_email.png",ni="images/icon/button/icon_sns.png",ti="images/icon/button/icon_print.png",ii="images/icon/button/icon_pdf.png",ri="images/icon/button/icon_download.png",ui="images/icon/button/icon_issues.png",fi="images/icon/button/icon_setting.png",ei="images/icon/button/icon_about.png",oi="images/icon/button/icon_close.png",yi="images/icon/button/icon_help.png",pi="images/icon/button/icon_info.png",wi="images/icon/button/icon_back.png",bi="images/icon/button/icon_forward.png",ki="images/icon/button/icon_firstpage.png",di="images/icon/button/icon_prevpage.png",gi="images/icon/button/icon_nextpage.png",nr="images/icon/button/icon_lastpage.png",tr="images/icon/button/icon_sound.png",ir="images/icon/button/icon_sound_.png",si="images/icon/button/icon_zoom.png",hi="images/icon/button/icon_zoom_.png",rr="images/icon/button/icon_autoflip.png",ur="images/icon/button/icon_search.png",fr="images/icon/button/icon_bookmark.png",er="images/icon/button/icon_notes.png",or="images/icon/button/icon_highlight.png",sr="images/icon/button/icon_fullscreen.png",hr="images/icon/button/icon_fullscreen_.png",cr="images/icon/controls/icon_controls_left.png",lr="images/icon/controls/icon_controls_right.png",ar="images/icon/controls/icon_controls_play.png",ci="images/icon/controls/icon_controls_pause.png",vr="images/icon/controls/icon_controls_refresh.png",yr="images/icon/zoom/icon_zoom100.png",pr="images/icon/zoom/icon_fitWindowWidth.png",wr="images/icon/zoom/icon_fitZoomOut.png",li="images/icon/zoom/icon_autoMove.png",ai="images/icon/zoom/icon_autoMoveForb.png",br="images/icon/icon-list.png",e=n(".flipbook"),o={},s,ot,t,f;o.isLocal=!1;o.isLocalData=!1;o.domainUrl="";o.bookWidth=0;o.bookHeight=0;o.elevation=0;o.gradients=!0;o.pages=0;o.AudioEnable=!0;o.isNoteState=!1;o.isHighlightState=!1;o.isZoomState=!1;s={};s.pageList=[];s.siteList=[];s.contentList=[];s.langsFileList=[];s.langsData={};s.currentLangs="eng";s.issueList=[];s.searchList=[];s.license="TRIAL";n(document).ready(function(){if(r.isMobile&&(window.location.href="html5forwebkit.html"),o.isLocal=window.location.href.indexOf("http")!==0?!0:!1,o.isLocalData=window.bookinfo?!0:!1,o.isLocal&&!o.isLocalData){r.showLocalRunnigWarning();return}o.isLocal||(o.domainUrl=window.location.href);window.isTouch="ontouchstart"in window;r.isMobile||(window.isTouch=!1);ot.Load()});ot={Load:function(){wt.loadingBeforeHide();o.isLocal?tt.load():h.loadBookInfoXml()},Ready:function(){var r,i;if(e.width()==0||e.height()==0){console.log("Flipbook could not be loaded, please refresh the page");setTimeout(function(){window.location.reload()},1e3);return}if(w.loadAllValue(),t.fullscreen&&ft.support_fullscreen()&&it.showFullScreenDialog(),t.singlepageMode=="single"&&bt.enterSinglePageMode(),t.bookLogoUrl){r=n("<div/>");r.attr("id","book-logo");i=n("<img />");i.attr("src",t.bookLogoUrl);i.css({position:"relative","z-index":"1",cursor:"pointer",float:"right","max-height":"40px",width:"expression"});i.on("click",function(){window.open(t.bookLogoHref,"_blank")});r.append(i);n("#top-container").append(r)}nt.createAudio();n(".book-background").css({"background-color":t.bgColor});n(".book-background").css({"background-image":" url('"+t.bgImage+"')"});u.setBgPosition(t.bgPosition);d.addBookDepth();rt.addBookmark();ot.Init()},Init:function(){ot._flip();ot._zoom();ot.Start()},_flip:function(){r.isMobile&&(t.singlepageMode="single");var f={autoCenter:!1,display:t.singlepageMode,elevation:o.elevation,gradients:o.gradients,direction:t.rightToLeft,duration:t.flipSpeedBoost,pages:o.pages,when:{start:function(n){b.Start(n)},turning:function(t,i,r){b.Turning(t,i,r);g.destroyPageElement();n("#zoomNavigator_dialog").dialog("close");a.closeSidePlane();v.mainAd.hideWhenOpened&&n("#mainAd").hide();nt.playFlippingSound();vi.hashUpdate(i);d.limitBookDepth(i);rt.limitBookmark(i)},turned:function(r,f,e){b.Turned(r,f);t.flipArrow&&(f>1&&n("#previous-button").fadeIn(),f<o.pages&&n("#next-button").fadeIn());et.updateTooltip();kr.limitGutterShadow(f);d.updateBookDepth(f);rt.updateBookmark();u.setToolbarButtonHistoryState();u.showCurrentPageText();k.updateCurrentPageThumbnailHighlight();g.destroyPageElement();for(var s=0;s<e.length;s++)e[s]!=0&&l.loadPositionElement(e[s]);t.showZoomBox&&i.value()>1&&it.showZoomNavigator()},end:function(){},first:function(){v.mainAd.has&&n("#mainAd").show();t.flipArrow&&n("#previous-button").hide()},last:function(){t.flipArrow&&n("#next-button").hide()},missing:function(n,t){for(var i=0;i<t.length;i++)ut.addPage(t[i])},zooming:function(n){b.Zoom(n)},showFoldedPage:function(){et.inCornerUpdateTooltip()},hideFoldedPage:function(){et.outCornerUpdateTooltip()},pressed:function(n){b.Pressed(n)},released:function(n){b.Released(n)}}};e.turn(f)},_zoom:function(){b.init()},Start:function(){var i=n("<div/>"),f;i.addClass("thumbnail-list-container");k.init(i);n(".thumbnail-list").append(i);k.updateCurrentPageThumbnailHighlight();k.arrows();k.mouseEvents(n(".thumbnail-list"));k.setThumbnailContainer(!0);u.setLayout();u.resize();vi.hashHandler();t.flipArrow&&r.arrows();r.mousewheel();r.keyboardControl();b.loadedAfterZoom();n("img").each(function(){n(this).attr("draggable","false")});s.license=r.getLicenseType(t.lic);s.license=="TRIAL"&&setTimeout(function(){it.showLicenseIsTrialDialog()},12e5);!o.isLocal&&t.analyticsUA&&dr.tracking(t.analyticsUA);et.init();wt.removeLoading();wt.loadingAfterShow();console.log("Complete");t.singlepageMode=="single"&&bt.onSinglePageModeCursor();t.autoflip&&(f=n("#autoflip img"),ct.isImgLoad(f,function(){f.addClass("dark")}),ht.startAutoFlip());st.encrypt("Pwd-Empty")!=t.password&&it.showPasswordDialog();ot.Test()},Test:function(){}};t={};t.loadingLogo="";t.pageWidth=0;t.pageHeight=0;t.password="";t.key="";t.singlepageMode="double";t.hardCover=!1;t.rightToLeft="ltr";t.fullscreen=!1;t.autoflipSeconds=5;t.autoflip=!1;t.bookSize=1;t.flipSpeedBoost=600;t.xmlThickness=0;t.tks=[];t.thickness=9;t.bookmarkWidth=30;t.bookmarkHeight=140;t.bookmarkFontSize=12;t.flipArrow=!1;t.gateway="";t.lic="pbOao2w";t.analyticsUA="";t.bookTitle="";t.author="";t.companyName="";t.companyUrl="";t.companyAddress="";t.email="";t.tel="";t.companyLogo="";t.copyright="";t.fitScreenAfterZoom=!1;t.defaultZoomScale=2;t.clickToZoom="singleclick";t.autoMoveAfterZoom=!1;t.zoomAfterLoaded=!1;t.limitTo100=!1;t.mouseWheelZoom=!1;t.showZoomBox=!0;t.verticalToolbarHideAfterZoom=!1;t.horizontalToolbarHideAfterZoom=!1;t.zoomMode="normal";t.windowColor="#454545";t.bgColor="#454545";t.bgImage="";t.bgPosition="stretch";f={};f.button_toc=!0;f.button_thumbs=!0;f.button_email=!0;f.button_sns=!0;f.button_print=!0;f.button_pdf=!0;f.button_download=!0;f.button_issues=!0;f.button_setting=!0;f.button_about=!0;f.button_close=!0;f.button_sound=!0;f.button_back=!0;f.button_forward=!0;f.button_help=!0;f.button_info=!0;f.button_zoom=!0;f.button_zoomin=!0;f.button_zoomout=!0;f.button_autoflip=!0;f.button_search=!0;f.button_bookmark=!0;f.button_notes=!0;f.button_highlight=!0;f.button_fullscreen=!0;f.button_icon_toc="";f.button_icon_thumbs="";f.button_icon_email="";f.button_icon_sns="";f.button_icon_print="";f.button_icon_pdf="";f.button_icon_download="";f.button_icon_issues="";f.button_icon_setting="";f.button_icon_about="";f.button_icon_close="";f.button_icon_sound="";f.button_icon_back="";f.button_icon_forward="";f.button_icon_help="";f.button_icon_info="";f.button_icon_zoom="";f.button_icon_zoomin="";f.button_icon_zoomout="";f.button_icon_autoflip="";f.button_icon_search="";f.button_icon_bookmark="";f.button_icon_notes="";f.button_icon_highlight="";f.button_icon_fullscreen="";f.button_icon_sound_="";f.button_icon_zoom_="";f.button_icon_fullscreen_="";f.button_icon_firstpage="";f.button_icon_prevpage="";f.button_icon_nextpage="";f.button_icon_lastpage="";t.zipIcon="";t.exeIcon="";t.zipUrl="";t.exeUrl="";t.pdfUrl="";t.helpUrl="";t.infoUrl="";t.tooltipColor="#000000";t.toolTextColor="#FFFFFF";t.showZoomTip=!0;t.showFlipTip=!0;t.bookLogoUrl="";t.bookLogoHref="";t.ThumbnailBarVisible=!1;t.HorizontalToolbarVisible="none";t.VerticalToolbarVisible=!1;t.horizontalToolbarShowBackground=!1;t.autoHideOnFullScreen=!0;t.backgroundMusicEnable=!0;t.backgroundMusicUrl="";t.flippingSoundEnable=!0;t.flippingSoundUrl="";t.clickEnable=!0;t.clickUrl="";var y={currentLoadLangFileIndex:0,parseBookInfoData:function(i){var s,h,r,u,c,ar,vr,yr,pr,l,wr,a,y,p,br,w,b,k,kr,d,g,nt,tt,it,rt,ut,ft,et,ot,dr,ht,fr,gr,nu,tu,iu,ru,uu,fu,ct,lt,at,vt,eu,ou,su,hu,cu,lu,au,vu,yu,pu,wu,bu,ku,du,gu,nf,tf,yt,pt,rf,bt,kt,dt,gt,uf,ni,ff,ti,ef,ii,of,ri,sf,ui,hf,fi,ei,oi,si,hi,ci,li,ai,vi,yi,pi,cf,lf,wi,bi,af,er,or,vf,yf,pf,tr,ki,di,wf,bf,ir,kf,sr,gi,hr,ur,df,cr,nr,rr,lr;i&&(s=i.find("bookinfo").attr("title"),s=s?s:"",t.bookTitle=s,n(document).attr("title",t.bookTitle),h=i.find("bookinfo").attr("loadingLogo"),h=h?h:"",t.loadingLogo=h,wt.showLoadingLogo(),r=Number(i.find("bookinfo").attr("pageWidth")),u=Number(i.find("bookinfo").attr("pageHeight")),t.key=st.calcKey(r,u),r=r?r:400,u=u?u:600,t.pageWidth=r,t.pageHeight=u,o.bookWidth=t.pageWidth*2,o.bookHeight=t.pageHeight,e.css({width:o.bookWidth,height:o.bookHeight}),c=i.find("bookinfo").attr("password"),c=c?c:"gbiVb3alobZ5",t.password=c,ar=i.find("bookinfo").attr("singlepageMode"),ar=="true"?(t.singlepageMode="single",o.elevation=0,o.gradients=!1):(t.singlepageMode="double",o.elevation=45),vr=i.find("bookinfo").attr("hardCover"),t.hardCover=vr=="true"?!0:!1,yr=i.find("bookinfo").attr("rightToLeft"),t.rightToLeft=yr=="true"?"rtl":"ltr",pr=i.find("bookinfo").attr("fullScreen"),t.fullscreen=pr=="true"?!0:!1,l=parseInt(i.find("bookinfo").attr("autoFlipSeconds")),l=l?l:5,t.autoflipSeconds=l,wr=i.find("bookinfo").attr("autoFlip"),t.autoflip=wr=="true"?!0:!1,a=parseInt(i.find("bookinfo").attr("bookSize")),a=a?a:10,t.bookSize=a/10,y=parseInt(i.find("bookinfo").attr("flipSpeedBoost")),y=y?y:600,t.flipSpeedBoost=7e4/y,p=parseInt(i.find("bookinfo").attr("thickness")),p=p?p:0,t.xmlThickness=p,t.tks=[],br=i.find("tks").find("tk"),br.each(function(){var i=parseInt(n(this).attr("begin")),r=parseInt(n(this).attr("end")),u=parseInt(n(this).attr("value"));t.tks.push({begin:i,end:r,value:u})}),w=parseInt(i.find("bookinfo").attr("bookmarkWidth")),w=w?w:30,t.bookmarkWidth=w,b=parseInt(i.find("bookinfo").attr("bookmarkHeight")),b=b?b:140,t.bookmarkHeight=b,k=parseInt(i.find("bookinfo").attr("bookmarkFontSize")),k=k?k:12,t.bookmarkFontSize=k,kr=i.find("bookinfo").attr("flipArrow"),t.flipArrow=kr=="true"?!0:!1,d=i.find("bookinfo").attr("gateway"),d=d?d:"",t.gateway=d,g=i.find("bookinfo").attr("lic"),g=g?g:"pbOao2w",t.lic=g,nt=i.find("bookinfo").attr("analyticsUA"),nt=nt?nt:"",t.analyticsUA=nt,tt=i.find("bookinfo").attr("author"),tt=tt?tt:"",t.author=tt,it=i.find("bookinfo").attr("companyName"),it=it?it:"",t.companyName=it,rt=i.find("bookinfo").attr("companyUrl"),rt=rt?rt:"",t.companyUrl=rt,ut=i.find("bookinfo").attr("companyAddress"),ut=ut?ut:"",t.companyAddress=ut,ft=i.find("bookinfo").attr("email"),ft=ft?ft:"",t.email=ft,et=i.find("bookinfo").attr("tel"),et=et?et:"",t.tel=et,ot=i.find("bookinfo").attr("companyLogo"),ot=ot?ot:"",t.companyLogo=ot,dr=i.find("bookinfo").attr("fitScreenAfterZoom"),t.fitScreenAfterZoom=dr=="true"?!0:!1,ht=parseInt(i.find("bookinfo").attr("defaultZoomScale")),ht=ht?ht:2,t.defaultZoomScale=ht,fr=i.find("bookinfo").attr("clickToZoom"),t.clickToZoom=fr=="doubleclick"?"doubleclick":fr=="none"?"none":"singleclick",gr=i.find("bookinfo").attr("autoMoveAfterZoom"),t.autoMoveAfterZoom=gr=="true"?!0:!1,nu=i.find("bookinfo").attr("zoomAfterLoaded"),t.zoomAfterLoaded=nu=="true"?!0:!1,tu=i.find("bookinfo").attr("limitTo100"),t.limitTo100=tu=="true"?!0:!1,iu=i.find("bookinfo").attr("mouseWheelZoom"),t.mouseWheelZoom=iu=="true"?!0:!1,ru=i.find("bookinfo").attr("showZoomBox"),t.showZoomBox=ru=="false"?!1:!0,uu=i.find("leftmenu").attr("hideAfterZoom"),t.verticalToolbarHideAfterZoom=uu=="false"?!1:!0,fu=i.find("bottommenu").attr("hideAfterZoom"),t.horizontalToolbarHideAfterZoom=fu=="false"?!1:!0,ct=i.find("bookinfo").attr("windowColor"),ct=ct?ct:"#454545",t.windowColor=ct,lt=i.find("bookinfo").attr("bgColor"),lt=lt?lt:"#454545",t.bgColor=lt,at=i.find("bookinfo").attr("bgImage"),at=at?at:"",t.bgImage=at,vt=i.find("bookinfo").attr("bgPosition"),vt=vt?vt:"stretch",t.bgPosition=vt,eu=i.find("toc").attr("visible"),f.button_toc=eu=="true"?!0:!1,f.button_icon_toc=i.find("toc").attr("icon"),ou=i.find("thumbs").attr("visible"),f.button_thumbs=ou=="true"?!0:!1,f.button_icon_thumbs=i.find("thumbs").attr("icon"),su=i.find("email").attr("visible"),f.button_email=su=="true"?!0:!1,f.button_icon_email=i.find("email").attr("icon"),hu=i.find("sns").attr("visible"),f.button_sns=hu=="true"?!0:!1,f.button_icon_sns=i.find("sns").attr("icon"),cu=i.find("print").attr("visible"),f.button_print=cu=="true"?!0:!1,f.button_icon_print=i.find("print").attr("icon"),lu=i.find("pdf").attr("visible"),f.button_pdf=lu=="true"?!0:!1,f.button_icon_pdf=i.find("pdf").attr("icon"),au=i.find("download").attr("visible"),f.button_download=au=="true"?!0:!1,f.button_icon_download=i.find("download").attr("icon"),vu=i.find("issues").attr("visible"),f.button_issues=vu=="true"?!0:!1,f.button_icon_issues=i.find("issues").attr("icon"),yu=i.find("setting").attr("visible"),f.button_setting=yu=="true"?!0:!1,f.button_icon_setting=i.find("setting").attr("icon"),pu=i.find("about").attr("visible"),f.button_about=pu=="true"?!0:!1,f.button_icon_about=i.find("about").attr("icon"),wu=i.find("close").attr("visible"),f.button_close=wu=="true"?!0:!1,f.button_icon_close=i.find("close").attr("icon"),bu=i.find("sound").attr("visible"),f.button_sound=bu=="true"?!0:!1,f.button_icon_sound=i.find("sound").attr("icon"),f.button_icon_sound_=i.find("sound").attr("dicon"),ku=i.find("back").attr("visible"),f.button_back=ku=="true"?!0:!1,f.button_icon_back=i.find("back").attr("icon"),du=i.find("forward").attr("visible"),f.button_forward=du=="true"?!0:!1,f.button_icon_forward=i.find("forward").attr("icon"),gu=i.find("help").attr("visible"),f.button_help=gu=="true"?!0:!1,f.button_icon_help=i.find("help").attr("icon"),nf=i.find("info").attr("visible"),f.button_info=nf=="true"?!0:!1,f.button_icon_info=i.find("info").attr("icon"),tf=i.find("zoom").attr("visible"),f.button_zoom=tf=="true"?!0:!1,yt=i.find("zoom").attr("icon"),yt=yt?yt:"",f.button_icon_zoom=yt,pt=i.find("zoom").attr("dicon"),pt=pt?pt:"",f.button_icon_zoom_=pt,f.button_icon_zoomin=f.button_icon_zoom,f.button_icon_zoomout=f.button_icon_zoom_,rf=i.find("zoom").attr("mode"),t.zoomMode=rf=="scalable"?"scalable":"normal",f.button_zoom?t.zoomMode=="scalable"?(f.button_zoom=!1,f.button_zoomin=!0,f.button_zoomout=!0):(f.button_zoom=!0,f.button_zoomin=!1,f.button_zoomout=!1):(f.button_zoom=!1,f.button_zoomin=!1,f.button_zoomout=!1),bt=i.find("firstpage").attr("icon"),bt=bt?bt:"",f.button_icon_firstpage=bt,kt=i.find("prevpage").attr("icon"),kt=kt?kt:"",f.button_icon_prevpage=kt,dt=i.find("nextpage").attr("icon"),dt=dt?dt:"",f.button_icon_nextpage=dt,gt=i.find("lastpage").attr("icon"),gt=gt?gt:"",f.button_icon_lastpage=gt,uf=i.find("autoflip").attr("visible"),f.button_autoflip=uf=="true"?!0:!1,ni=i.find("autoflip").attr("icon"),ni=ni?ni:"",f.button_icon_autoflip=ni,ff=i.find("search").attr("visible"),f.button_search=ff=="true"?!0:!1,ti=i.find("search").attr("icon"),ti=ti?ti:"",f.button_icon_search=ti,ef=i.find("bookmark").attr("visible"),f.button_bookmark=ef=="true"?!0:!1,ii=i.find("bookmark").attr("icon"),ii=ii?ii:"",f.button_icon_bookmark=ii,of=i.find("notes").attr("visible"),f.button_notes=of=="true"?!0:!1,ri=i.find("notes").attr("icon"),ri=ri?ri:"",f.button_icon_notes=ri,sf=i.find("highlight").attr("visible"),f.button_highlight=sf=="true"?!0:!1,ui=i.find("highlight").attr("icon"),ui=ui?ui:"",f.button_icon_highlight=ui,hf=i.find("fullscreen").attr("visible"),f.button_fullscreen=hf=="true"?!0:!1,fi=i.find("fullscreen").attr("icon"),fi=fi?fi:"",f.button_icon_fullscreen=fi,ei=i.find("fullscreen").attr("dicon"),ei=ei?ei:"",f.button_icon_fullscreen_=ei,oi=i.find("bookinfo").attr("zipIcon"),oi=oi?oi:"",t.zipIcon=oi,si=i.find("bookinfo").attr("exeIcon"),si=si?si:"",t.exeIcon=si,hi=i.find("bookinfo").attr("zipUrl"),hi=hi?hi:"",t.zipUrl=hi,ci=i.find("bookinfo").attr("exeUrl"),ci=ci?ci:"",t.exeUrl=ci,li=i.find("bookinfo").attr("pdfUrl"),li=li?li:"",t.pdfUrl=li,ai=i.find("help").attr("url"),ai=ai?ai:"",t.helpUrl=ai,vi=i.find("info").attr("url"),vi=vi?vi:"",t.infoUrl=vi,yi=i.find("tooltip").attr("bgColor"),yi=yi?yi:"",t.tooltipColor=yi,pi=i.find("tooltip").attr("fgColor"),pi=pi?pi:"",t.toolTextColor=pi,cf=i.find("tooltip").attr("showZoomTip"),t.showZoomTip=cf=="true"?!0:!1,lf=i.find("tooltip").attr("showFlipTip"),t.showFlipTip=lf=="true"?!0:!1,wi=i.find("bookLogo").attr("url"),wi=wi?wi:"",t.bookLogoUrl=wi,bi=i.find("bookLogo").attr("href"),bi=bi?bi:"",t.bookLogoHref=bi,af=i.find("bottomthumb").attr("visible"),t.ThumbnailBarVisible=af=="true"?!0:!1,er=i.find("bottommenu").attr("visible"),or=i.find("bottommenu").attr("position"),t.HorizontalToolbarVisible=er=="true"?or=="bottom"?"bottom":or=="top"?"top":"none":er=="false"?"none":"bottom",vf=i.find("leftmenu").attr("visible"),t.VerticalToolbarVisible=vf=="true"?!0:!1,yf=i.find("bottommenu").attr("showBackground"),t.horizontalToolbarShowBackground=yf=="true"?!0:!1,pf=i.find("bottommenu").attr("autoHideOnFullScreen"),t.autoHideOnFullScreen=pf=="true"?!0:!1,tr=!1,i.find("mainAd").length>0&&(tr=!0),tr&&(ki=i.find("mainAd").attr("url"),ki=ki?ki:"",di=i.find("mainAd").attr("href"),di=di?di:"",wf=i.find("mainAd").attr("hideWhenOpened"),bf=wf=="true"?!0:!1,v.mainAd={has:tr,url:ki,href:di,hideWhenOpened:bf}),ir=!1,i.find("topAd").length>0&&(ir=!0),ir&&(kf=i.find("topAd").attr("slideShow"),sr=!1,kf=="true"&&(sr=!0),gi=i.find("topAd").attr("position"),gi=gi?gi:"",rr=i.find("topAd").find("pic"),hr=[],rr.each(function(){var t=n(this).attr("url"),i=n(this).attr("href"),r=n(this).attr("width"),u=n(this).attr("height"),f=n(this).attr("time");hr.push({url:t,href:i,width:r,height:u,time:f})}),v.topAd={has:ir,slideShow:sr,position:gi,pics:hr}),ur=!1,i.find("rightAd").length>0&&(ur=!0),ur&&(df=i.find("rightAd").attr("slideShow"),cr=!1,df=="true"&&(cr=!0),nr=i.find("rightAd").attr("position"),nr=nr?nr:"",rr=i.find("rightAd").find("pic"),lr=[],rr.each(function(){var t=n(this).attr("url"),i=n(this).attr("href"),r=n(this).attr("width"),u=n(this).attr("height"),f=n(this).attr("time");lr.push({url:t,href:i,width:r,height:u,time:f})}),v.rightAd={has:ur,slideShow:cr,position:nr,pics:lr}))},parsePageData:function(t){var r,i;if(t){for(r=t.find("page"),r.each(function(){var i=n(this).attr("id"),r=n(this).attr("source"),u=n(this).attr("thumb"),t=!1;n(this).attr("shadow")=="true"&&(t=!0);s.pageList.push({id:i,source:r,thumb:u,shadow:t})}),i=0;i<s.pageList.length;i++)s.pageList[i].source.indexOf("vector")!=-1&&(s.pageList[i].source=s.pageList[i].source.replace(/vector/,"pages")),s.pageList[i].source.indexOf(".swf")!=-1&&(s.pageList[i].source=s.pageList[i].source.replace(/.swf/,".jpg"));o.pages=s.pageList.length}},parseBookmarkData:function(t){if(t){var i=t.find("bookmark");i.each(function(){var t=n(this).attr("page"),i=n(this).attr("content"),r=n(this).attr("color");rt.bookmarkList.push({page:t,content:i,color:r})})}},parseButtonData:function(t){if(t){var i=t.find("button");i.each(function(){var t=n(this).attr("page"),i=n(this).attr("x"),r=n(this).attr("y"),u=n(this).attr("width"),f=n(this).attr("height"),e=n(this).attr("target"),o=n(this).attr("rolloverText"),s=n(this).attr("windowColor"),h=n(this).attr("destination"),c=n(this).attr("type"),a=n(this).attr("youtubeId"),v=n(this).attr("rollover"),y=n(this).attr("image"),p=n(this).attr("popupWidth"),w=n(this).attr("popupHeight"),b=n(this).text();l.buttonList.push({page:t,x:i,y:r,width:u,height:f,target:e,rolloverText:o,windowColor:s,destination:h,type:c,youtubeId:a,rollover:v,image:y,popupWidth:p,popupHeight:w,text:b})})}},parseHotlinkData:function(t){if(t){var i=t.find("hotlink");i.each(function(){var t=n(this).attr("page"),i=n(this).attr("x"),r=n(this).attr("y"),u=n(this).attr("width"),f=n(this).attr("height"),e=n(this).attr("target"),o=n(this).attr("rolloverText"),s=n(this).attr("windowColor"),h=n(this).attr("color"),c=n(this).attr("fontColor"),a=n(this).attr("fontSize"),v=n(this).attr("opacity"),y=n(this).attr("rolloverOpacity"),p=n(this).attr("rolloverColor"),w=n(this).attr("clickSound"),b=n(this).attr("destination"),k=n(this).attr("type"),d=n(this).attr("youtubeId"),g=n(this).attr("popupWidth"),nt=n(this).attr("popupHeight"),tt=n(this).text();l.hotlinkList.push({page:t,x:i,y:r,width:u,height:f,target:e,rolloverText:o,windowColor:s,color:h,fontColor:c,fontSize:a,opacity:v,rolloverOpacity:y,rolloverColor:p,clickSound:w,destination:b,type:k,youtubeId:d,popupWidth:g,popupHeight:nt,text:tt})})}},parseVideoData:function(t){if(t){var i=t.find("video");i.each(function(){var t=n(this).attr("page"),i=n(this).attr("x"),r=n(this).attr("y"),u=n(this).attr("width"),f=n(this).attr("height"),e=n(this).attr("url"),o=n(this).attr("youtubeId"),s=n(this).attr("autoPlay"),h=n(this).attr("autoRepeat"),c=n(this).attr("showControl"),a=n(this).attr("stopWhenFlip");l.videoList.push({page:t,x:i,y:r,width:u,height:f,url:e,youtubeId:o,autoPlay:s,autoRepeat:h,showControl:c,stopWhenFlip:a})})}},parseSlideshowData:function(t){if(t){var i=t.find("slideshow");i.each(function(){var i=n(this).attr("page"),r=n(this).attr("x"),u=n(this).attr("y"),f=n(this).attr("width"),e=n(this).attr("height"),o=n(this).attr("time"),s=n(this).attr("bgColor"),h=n(this).attr("transition"),c=n(this).attr("ctrlBarAlpha"),t=[],a=n(this).find("pic");a.each(function(){var i=n(this).attr("url"),r=n(this).attr("href");t.push({url:i,href:r})});l.slideshowList.push({page:i,x:r,y:u,width:f,height:e,time:o,bgColor:s,transition:h,ctrlBarAlpha:c,picList:t})})}},parseSoundData:function(i){var r,u,f,e;i&&(r=i.find("background").attr("enable"),t.backgroundMusicEnable=r=="true"?!0:!1,t.backgroundMusicUrl=i.find("background").find("sound").attr("url"),u=i.find("flipping").attr("enable"),t.flippingSoundEnable=u=="true"?!0:!1,t.flippingSoundUrl=i.find("flipping").attr("url"),f=i.find("click").attr("enable"),t.clickEnable=f=="true"?!0:!1,t.clickUrl=i.find("click").attr("url"),e=i.find("pages").find("sound"),e.each(function(){var u=n(this).attr("pageNumber"),i=!1,t,r;n(this).attr("repeat")=="true"&&(i=!0);t=!1;n(this).attr("controlBar")=="false"&&(t=!0);r=n(this).attr("url");l.pageSoundList.push({page:u,repeat:i,hideControlBar:t,url:r})}))},parseContentData:function(t){if(t){var i=t.find("content");i.each(function(){var t=n(this).attr("title"),i=n(this).attr("page");s.contentList.push({title:t,page:i})})}},parseIssueData:function(t){if(t){var i=t.find("issue");i.each(function(){var t=n(this).attr("title"),i=n(this).attr("url");s.issueList.push({title:t,url:i})})}},parseCopyrightData:function(n){if(n){var i=n.find("copyright").text();i=i?i:"";t.copyright=i}},parseSearchData:function(t){if(t){var i=t.find("page");i.each(function(){var t=n(this).attr("pageNumber"),i=n(this).find("text").text();s.searchList.push({pageNumber:t,text:i})})}},parseShareData:function(t){if(t){var i=t.find("site");i.each(function(){var t=n(this).attr("name"),i=n(this).attr("logoUrl"),r=n(this).attr("href");s.siteList.push({name:t,logo:i,href:r})})}},parseLanguagesData:function(t){if(t){var i=t.find("language");i.each(function(){var i=n(this).attr("content"),t=n(this).attr("default");t=="yes"?(s.currentLangs=i,t="yes"):t="no";s.langsFileList.push({content:i,"default":t})});y.currentLoadLangFileIndex=0}},parseLangData:function(t){if(t){s.langsData[s.langsFileList[y.currentLoadLangFileIndex].content]={};var i=t.find("item");i.each(function(){var t=n(this).attr("key"),i=n(this).attr("value");s.langsData[s.langsFileList[y.currentLoadLangFileIndex].content][t]={value:i}});y.currentLoadLangFileIndex++}},allLangComplete:function(){var i,n;for(window.bookinfo="",window.pages="",window.bookmarks="",window.buttons="",window.hotlinks="",window.videos="",window.slideshow="",window.sounds="",window.contents="",window.issues="",window.copyright="",window.search="",window.share="",window.languages="",window.bookinfo=null,window.pages=null,window.bookmarks=null,window.buttons=null,window.hotlinks=null,window.videos=null,window.slideshow=null,window.sounds=null,window.contents=null,window.issues=null,window.copyright=null,window.search=null,window.share=null,window.languages=null,i=["arb","chs","cht","den","deu","eng","esn","fra","gre","heb","hun","ita","jpn","kor","nld","nor","ptg","rus","sve","tur"],n=0;n<i.length;n++)window[i[n]]&&(window[i[n]]="",window[i[n]]=null);t.loadingLogo?setTimeout(function(){ot.Ready()},1e3):ot.Ready()}},tt={parse:function(t,i){try{return t=r.xmlFilter(t),n(n.parseXML(t))}catch(u){switch(i){case"bookinfo":case"pages":alert(u);break;case"bookmarks":case"buttons":case"hotlinks":case"videos":case"slideshow":case"sounds":case"contents":case"issues":case"copyright":case"search":console.log(i+"!"+u);break;case"share":h.loadShareXmlErrorHandle();break;case"languages":h.loadLanguagesXmlErrorHandle();break;default:alert(u)}}},parseLang:function(t,i){try{return n(n.parseXML(t))}catch(r){h.loadLangXmlErrorHandle(i)}},load:function(){var b=tt.parse(window.bookinfo,"bookinfo"),t,i,u,f,e,h,c,l,a,v,p,n,w;y.parseBookInfoData(b);t=tt.parse(window.pages,"pages");y.parsePageData(t);i=tt.parse(window.bookmarks,"bookmarks");y.parseBookmarkData(i);u=tt.parse(window.buttons,"buttons");y.parseButtonData(u);f=tt.parse(window.hotlinks,"hotlinks");y.parseHotlinkData(f);e=tt.parse(window.videos,"videos");y.parseVideoData(e);h=tt.parse(window.slideshow,"slideshow");y.parseSlideshowData(h);c=tt.parse(window.sounds,"sounds");y.parseSoundData(c);l=tt.parse(window.contents,"contents");y.parseContentData(l);a=tt.parse(window.issues,"issues");y.parseIssueData(a);v=tt.parse(window.copyright,"copyright");y.parseCopyrightData(v);p=tt.parse(window.search,"search");y.parseSearchData(p);n=r.xmlFilter(window.share);n=tt.parse(n,"share");y.parseShareData(n);o.isLocal?(w=tt.parse(window.languages,"languages"),y.parseLanguagesData(w),tt.loadLang(s.langsFileList[y.currentLoadLangFileIndex].content)):y.allLangComplete()},loadLang:function(n){var t=tt.parseLang(window[n],n);y.parseLangData(t);y.currentLoadLangFileIndex<s.langsFileList.length?tt.loadLang(s.langsFileList[y.currentLoadLangFileIndex].content):y.allLangComplete()}},h={isCache:!0,loadBookInfoXml:function(){sessionStorage.BookInfo?h.loadBookInfoXmlComplete(sessionStorage.BookInfo):n.ajax({url:"data/bookinfo.xml",type:"GET",dataType:"text",cache:h.isCache,error:function(){},success:h.loadBookInfoXmlComplete})},loadBookInfoXmlComplete:function(n){sessionStorage.BookInfo||(sessionStorage.BookInfo=n);window.bookinfo=n;h.loadPagesXml()},loadPagesXml:function(){sessionStorage.Pages?h.loadPagesXmlComplete(sessionStorage.Pages):n.ajax({url:"data/pages.xml",type:"GET",dataType:"text",cache:h.isCache,error:function(){alert("Error loading pages.xml file!!!!")},success:h.loadPagesXmlComplete})},loadPagesXmlComplete:function(n){sessionStorage.Pages||(sessionStorage.Pages=n);window.pages=n;h.loadBookmarksXml()},loadBookmarksXml:function(t){t=t||"text";sessionStorage.Bookmarks?h.loadBookmarksXmlComplete(sessionStorage.Bookmarks):n.ajax({url:"data/bookmarks.xml",type:"GET",dataType:t,cache:h.isCache,error:function(){console.log("Error loading bookmarks.xml file!!!");h.loadButtonsXml()},success:function(n){h.loadBookmarksXmlComplete(n,t)}})},loadBookmarksXmlComplete:function(t,i){if(sessionStorage.Bookmarks||(sessionStorage.Bookmarks=t),i=="xml"){var r=n(t);y.parseBookmarkData(r)}else window.bookmarks=t,h.loadButtonsXml()},loadButtonsXml:function(t){t=t||"text";sessionStorage.Buttons?h.loadButtonsXmlComplete(sessionStorage.Buttons):n.ajax({url:"data/buttons.xml",type:"GET",dataType:t,cache:h.isCache,error:function(){console.log("Error loading buttons.xml file!!!");h.loadHotlinksXml()},success:function(n){h.loadButtonsXmlComplete(n,t)}})},loadButtonsXmlComplete:function(t,i){if(sessionStorage.Buttons||(sessionStorage.Buttons=t),i=="xml"){var r=n(t);y.parseButtonData(r)}else window.buttons=t,h.loadHotlinksXml()},loadHotlinksXml:function(t){t=t||"text";sessionStorage.Hotlinks?h.loadHotlinksXmlComplete(sessionStorage.Hotlinks):n.ajax({url:"data/hotlinks.xml",type:"GET",dataType:t,cache:h.isCache,error:function(){console.log("Error loading hotlinks.xml file!!!");h.loadVideosXml()},success:function(n){h.loadHotlinksXmlComplete(n,t)}})},loadHotlinksXmlComplete:function(t,i){if(sessionStorage.Hotlinks||(sessionStorage.Hotlinks=t),i=="xml"){var r=n(t);y.parseHotlinkData(r)}else window.hotlinks=t,h.loadVideosXml()},loadVideosXml:function(t){t=t||"text";sessionStorage.Videos?h.loadVideosXmlComplete(sessionStorage.Videos):n.ajax({url:"data/videos.xml",type:"GET",dataType:t,cache:h.isCache,error:function(){console.log("Error loading videos.xml file!!!");h.loadSlideshowXml()},success:function(n){h.loadVideosXmlComplete(n,t)}})},loadVideosXmlComplete:function(t,i){if(sessionStorage.Videos||(sessionStorage.Videos=t),i=="xml"){var r=n(t);y.parseVideoData(r)}else window.videos=t,h.loadSlideshowXml()},loadSlideshowXml:function(t){t=t||"text";sessionStorage.Slideshow?h.loadSlideshowXmlComplete(sessionStorage.Slideshow):n.ajax({url:"data/slideshow.xml",type:"GET",dataType:t,cache:h.isCache,error:function(){console.log("Error loading slideshow.xml file!!!");h.loadSoundsXml()},success:function(n){h.loadSlideshowXmlComplete(n,t)}})},loadSlideshowXmlComplete:function(t,i){if(sessionStorage.Slideshow||(sessionStorage.Slideshow=t),i=="xml"){var r=n(t);y.parseSlideshowData(r)}else window.slideshow=t,h.loadSoundsXml()},loadSoundsXml:function(t){t=t||"text";sessionStorage.Sounds?h.loadSoundsXmlComplete(sessionStorage.Sounds):n.ajax({url:"data/sounds.xml",type:"GET",dataType:t,cache:h.isCache,error:function(){console.log("Error loading sounds.xml file!!!");h.loadContentsXml()},success:function(n){h.loadSoundsXmlComplete(n,t)}})},loadSoundsXmlComplete:function(t,i){if(sessionStorage.Sounds||(sessionStorage.Sounds=t),i=="xml"){var r=n(t);y.parseSoundData(r)}else window.sounds=t,h.loadContentsXml()},loadContentsXml:function(t){t=t||"text";sessionStorage.Contents?h.loadContentsXmlComplete(sessionStorage.Contents):n.ajax({url:"data/contents.xml",type:"GET",dataType:t,cache:h.isCache,error:function(){console.log("Error loading contents.xml file!!");h.loadIssuesXml()},success:function(n){h.loadContentsXmlComplete(n,t)}})},loadContentsXmlComplete:function(t,i){if(sessionStorage.Contents||(sessionStorage.Contents=t),i=="xml"){var r=n(t);y.parseContentData(r)}else window.contents=t,h.loadIssuesXml()},loadIssuesXml:function(t){t=t||"text";sessionStorage.Issues?h.loadIssuesXmlComplete(sessionStorage.Issues):n.ajax({url:"data/issues.xml",type:"GET",dataType:t,cache:h.isCache,error:function(){console.log("Error loading issues.xml file!!");h.loadCopyrightXml()},success:function(n){h.loadIssuesXmlComplete(n,t)}})},loadIssuesXmlComplete:function(t,i){if(sessionStorage.Issues||(sessionStorage.Issues=t),i=="xml"){var r=n(t);y.parseIssueData(r)}else window.issues=t,h.loadCopyrightXml()},loadCopyrightXml:function(t){t=t||"text";sessionStorage.Copyright?h.loadCopyrightXmlComplete(sessionStorage.Copyright):n.ajax({url:"data/copyright.xml",type:"GET",dataType:t,cache:h.isCache,error:function(){console.log("Error loading copyright.xml file!!");h.loadSearchXml()},success:function(n){h.loadCopyrightXmlComplete(n,t)}})},loadCopyrightXmlComplete:function(t,i){if(sessionStorage.Copyright||(sessionStorage.Copyright=t),i=="xml"){var r=n(t);y.parseCopyrightData(r)}else window.copyright=t,h.loadSearchXml()},loadSearchXml:function(t){t=t||"text";sessionStorage.Search?h.loadSearchXmlComplete(sessionStorage.Search):n.ajax({url:"data/search.xml",type:"GET",dataType:t,cache:h.isCache,error:function(){console.log("Error loading search.xml file!!");h.loadShareXml()},success:function(n){h.loadSearchXmlComplete(n,t)}})},loadSearchXmlComplete:function(t,i){if(sessionStorage.Search||(sessionStorage.Search=t),i=="xml"){var r=n(t);y.parseSearchData(r)}else window.search=t,h.loadShareXml()},loadShareXml:function(){sessionStorage.Share?h.loadShareXmlComplete(sessionStorage.Share):n.ajax({url:"data/share.xml",type:"GET",dataType:"text",cache:h.isCache,error:function(){console.log("Error loading share.xml file!");h.loadShareXmlErrorHandle()},success:h.loadShareXmlComplete})},loadShareXmlErrorHandle:function(){console.log("share using embed data");var n=share_embed;h.loadShareXmlComplete(n)},loadShareXmlComplete:function(n){sessionStorage.Share||(sessionStorage.Share=n);window.share=n;h.loadLanguagesXml()},loadLanguagesXml:function(){n.ajax({url:"data/languages/languages.xml",type:"GET",dataType:"xml",cache:h.isCache,error:function(){console.log("Error loading languages.xml file!");h.loadLanguagesXmlErrorHandle()},success:h.loadLanguagesXmlComplete})},loadLanguagesXmlErrorHandle:function(){console.log("languages using embed data");var n=languages_embed;h.loadLanguagesXmlComplete(n)},loadLanguagesXmlComplete:function(t){var i=n(t);y.parseLanguagesData(i);h.loadLangXml(s.langsFileList[y.currentLoadLangFileIndex].content)},loadLangXml:function(t){n.ajax({url:"data/languages/"+t+".xml",type:"GET",dataType:"xml",cache:h.isCache,error:function(){console.log("Error loading "+t+".xml file!");h.loadLangXmlErrorHandle(t)},success:h.loadLangXmlComplete})},loadLangXmlErrorHandle:function(n){console.log(n+" using embed data");var t=window[n+"_embed"];h.loadLangXmlComplete(t)},loadLangXmlComplete:function(t){var i=n(t);y.parseLangData(i);y.currentLoadLangFileIndex<s.langsFileList.length?h.loadLangXml(s.langsFileList[y.currentLoadLangFileIndex].content):h.allDataComplete()},allDataComplete:function(){tt.load()}},wt={loadingBeforeHide:function(){n(".top-menu").hide();n(".side-container").hide();n(".viewport").hide();n(".thumbnail-container").hide();n(".bottom-menu").hide()},loadingAfterShow:function(){n(".top-menu").fadeIn();n(".side-container").fadeIn();n(".viewport").fadeIn();n(".thumbnail-container").fadeIn();n(".bottom-menu").fadeIn()},showLoadingLogo:function(){var u,r,i;t.loadingLogo&&(u=n("#loading"),r=n("<div/>"),r.attr("id","loadingLogo"),r.css({position:"relative","text-align":"center"}),i=n("<img />"),i.attr("src",t.loadingLogo),i.hide(),r.append(i),u.append(r),ct.isImgLoad(i,function(){var n=-i.height()/2-100,t=-i.width()/2+50;r.css({top:n,left:t});i.show()}))},removeLoading:function(){n("#loading").remove()}},ut={addPage:function(i){var r=n("<div/>"),u;t.singlepageMode=="single"?r.addClass("hard"):t.hardCover&&(i==1||i==2||i==o.pages-1||i==o.pages)&&r.addClass("hard");e.turn("addPage",r,i)&&(u="",s.pageList[i-1].shadow&&(u+='<div class="gradient"><\/div>'),u+='<div class="loader"><\/div>',r.html(u),ut.loadPage(i,r))},loadPage:function(t,i){var i,r;if(s.pageList[t-1].source.indexOf(".swf")!=-1)i=n(".flipbook .p"+t),i.flash({swf:s.pageList[t-1].source,width:"100%",height:"100%"}),i.find(".loader").remove();else{r=n("<img />");r.on("load",function(){var i=n(".flipbook .p"+t);r.css({width:"100%",height:"100%"});r.attr("draggable","false");r.appendTo(n(".flipbook .p"+t));i.find(".loader").remove()});r.attr("src",s.pageList[t-1].source)}},getCurrentPage:function(){var n=-1;return e.turn("is")&&(n=e.turn("page")),n},getCurrentPageNumber:function(n){var t=e.turn("view");return t.indexOf(0)==-1?t[1]?t[0]+n+t[1]:t[0]:t[0]==0?t[1]:t[0]},getPageSide:function(n){var i=e.turn("view",n);return t.singlepageMode=="double"?i[0]?i[1]?t.rightToLeft=="rtl"?i[0]==n?"right":"left":i[0]==n?"left":"right":t.rightToLeft=="rtl"?"right":"left":t.rightToLeft=="rtl"?"left":"right":"single"}},st={calcKey:function(n,t){var i=(n*t).toString(),r,u,f;for(i=i.substr(i.length-3)+i.substr(0,2),r="",u=0;u<i.length;u++)f=Math.floor(i.charCodeAt(u)/2),r=r+f.toString(16);return r.toUpperCase()},encrypt:function(n){return st.encryptKey(n,t.key)},encryptKey:function(n,t){for(var f,e,o,s,i=0,r="",u=0;u<n.length-1;u++)f=n.charCodeAt(u)+t.charCodeAt(i),e=String.fromCharCode(f),r+=e,i++,i>=t.length-1&&(i=0);return n.length>0&&(o=n.length-1,s=n.substr(o),r=r+s),btoa(r)}},ht={autoFliping:!1,autoFlipTimer:0,startAutoFlip:function(){ht.stopAutoFlip();ht.autoFlipTimer=setInterval(function(){ht.autoFliping=!0;e.turn("next");ut.getCurrentPage()>=o.pages&&ht.stopAutoFlip()},1e3*t.autoflipSeconds)},stopAutoFlip:function(){ht.autoFliping=!1;clearInterval(ht.autoFlipTimer)}},p={helpLayer:null,hideTipsTimer:0,showTips:function(){if(!(n("#helpTips").length>0)){p.helpLayer=n("<div/>");p.helpLayer.attr("id","helpTips");p.helpLayer.css({width:n(window).width(),height:n(window).height(),background:"rgba(0, 0, 0, 1)",position:"absolute","z-index":"998",left:"0",top:"0",opacity:"0.5"});n(document.body).append(p.helpLayer);var i=n("<div/>");i.attr("id","help-exit-tips");i.css({left:n("#help").offset().left,top:n("#help").offset().top});p.helpLayer.append(i);i.on("mouseleave",function(){p.hideTips()});p.helpLayer.on("click",function(){p.hideTips()});p.drawTips_middle();t.VerticalToolbarVisible&&(p.drawTips_horizontal(n("#toc"),160,60,50,r.l("TableOfContents")),p.drawTips_horizontal(n("#thumbs"),160,60,50,r.l("ThumbnailView")),p.drawTips_horizontal(n("#email"),160,60,50,r.l("ShareThisFlipBook")),p.drawTips_horizontal(n("#sns"),160,60,50,r.l("ShareOnSocialNetwork")),p.drawTips_horizontal(n("#print"),160,60,50,r.l("Print")),p.drawTips_horizontal(n("#pdf"),160,60,50,r.l("SaveAsPDF")),p.drawTips_horizontal(n("#download"),160,60,50,r.l("Download")),p.drawTips_horizontal(n("#issues"),160,60,50,r.l("PreviousIssues")),p.drawTips_horizontal(n("#setting"),160,60,50,r.l("Settings")),p.drawTips_horizontal(n("#about"),160,60,50,r.l("AboutUs")),p.drawTips_horizontal(n("#close"),160,60,50,r.l("Close")));t.HorizontalToolbarVisible=="top"?(p.drawTips_vertical(n("#gotoPageController"),60,160,0,r.l("GotoPage")),p.drawTips_vertical(n("#autoflip"),60,160,50,r.l("AutoFlip")),p.drawTips_vertical(n("#search"),60,140,50,r.l("Search")),p.drawTips_vertical(n("#bookmark"),60,120,50,r.l("Bookmark")),p.drawTips_vertical(n("#notes"),60,100,50,r.l("Notes")),p.drawTips_vertical(n("#highlight"),60,80,50,r.l("Highlight")),p.drawTips_vertical(n("#fullscreen"),60,60,50,r.l("FullScreen"))):t.HorizontalToolbarVisible=="bottom"&&(p.drawTips_vertical_(n("#gotoPageController"),60,160,0,r.l("GotoPage")),p.drawTips_vertical_(n("#autoflip"),60,160,50,r.l("AutoFlip")),p.drawTips_vertical_(n("#search"),60,140,50,r.l("Search")),p.drawTips_vertical_(n("#bookmark"),60,120,50,r.l("Bookmark")),p.drawTips_vertical_(n("#notes"),60,100,50,r.l("Notes")),p.drawTips_vertical_(n("#highlight"),60,80,50,r.l("Highlight")),p.drawTips_vertical_(n("#fullscreen"),60,60,50,r.l("FullScreen")))}},drawTips_middle:function(){var i=n("<div />"),c,u,f,e,o,s,h;p.helpLayer.append(i);var l=109,a=320,v=(n(window).height()-a)/2,y=(n(window).width()-l)/2;i.css({width:l,height:a,position:"absolute",top:v,left:y});c="";c=t.mouseWheelZoom?r.l("MouseWheelZoom","Scroll the wheel to zoom in or out"):r.l("MouseWheelMove","Scroll the wheel to move");u=n("<div/>");u.css({width:160,height:60,"border-bottom":"1px solid #fff",position:"absolute",left:50,top:90});f=n("<div/>");f.css({position:"relative",right:-170,top:50,color:"#fff","word-break":"keep-all","white-space":"nowrap"});f.text(c);u.append(f);i.append(u);e="";(t.clickToZoom="singleclick")?e=r.l("SingleClickToZoom","Single click to zoom"):(t.clickToZoom="doubleclick")&&(e=r.l("DoubleClickToZoom","Double click to zoom"));o=n("<div/>");o.css({width:160,height:60,"border-bottom":"1px solid #fff",position:"absolute",left:-140,top:100});s=n("<div/>");s.css({position:"relative",left:-160,top:40,color:"#fff","word-break":"keep-all","white-space":"nowrap","text-align":"right"});s.text(e);o.append(s);i.append(o);h=n("<img />");h.attr("id","help_mouse_pic");h.attr("src","images/computer_mouse.png");i.append(h)},drawTips_vertical_:function(t,i,r,f,e){var o,s;t.is(":hidden")||(o=n("<div/>"),o.css({width:i,height:r,"border-right":"1px solid #fff",position:"absolute",left:t.offset().left-f,bottom:u.toolbarHeight+u.thumbnailHeight}),s=n("<div/>"),s.css({width:i*2,position:"absolute",left:"0",top:-20,color:"#fff","text-align":"center"}),s.text(e),o.append(s),p.helpLayer.append(o))},drawTips_vertical:function(t,i,r,f,e){var o,s;t.is(":hidden")||(o=n("<div/>"),o.css({width:i,height:r,"border-right":"1px solid #fff",position:"absolute",left:t.offset().left-f,top:u.toolbarHeight}),s=n("<div/>"),s.css({width:i*2,position:"absolute",left:"0",top:r+10,color:"#fff","text-align":"center"}),s.text(e),o.append(s),p.helpLayer.append(o))},drawTips_horizontal:function(t,i,r,u,f){var e,o;t.is(":hidden")||(e=n("<div/>"),e.css({width:i,height:r,"border-bottom":"1px solid #fff",position:"absolute",left:n("#plane-icon").width(),top:t.offset().top-u,"text-align":"right"}),o=n("<div/>"),o.css({position:"absolute",left:i+10,top:r,color:"#fff","word-break":"keep-all","white-space":"nowrap"}),o.text(f),e.append(o),p.helpLayer.append(e))},hideTips:function(){n("#helpTips").remove()}},ft={support_fullscreen:function(){var n=!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/),t=r.check_platform();return t=="Windows"&&n||t=="MacOS"&&n?!1:ft._supportFullScreen()?!0:!1},_supportFullScreen:function(){var n=document.documentElement;return"requestFullscreen"in n||"mozRequestFullScreen"in n&&document.mozFullScreenEnabled||"webkitRequestFullScreen"in n},isFullScreen:function(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||!1},requestFullScreen:function(t,i){t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);i();n(document.body).css({width:"100%"});n("#fullscreen").attr("title",u.getDlabelByHorizontalMenu("fullscreen"));n("#fullscreen img").attr("src",u.getDiconByHorizontalMenu("fullscreen"))},cancelFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen();n("#fullscreen").attr("title",u.getLabelByHorizontalMenu("fullscreen"));n("#fullscreen img").attr("src",u.getIconByHorizontalMenu("fullscreen"))},toggleFullScreen:function(){if(ft.support_fullscreen()){var i=function(){var i=ft.isFullScreen();i&&n("<div/>").appendTo(n(".fullScreen")).text(r.l("EscToExit")).addClass("notification ui-state-default ui-corner-bottom").position({my:"center center",at:"center center",of:window}).show({effect:"fade"}).delay(500).hide({effect:"fade",duration:"slow"},function(){n(this).remove()});r.isMobile||(i&&t.autoHideOnFullScreen?(n(".top-menu").hide(),n(".bottom-menu").hide(),u.toolbarHeight=0,n(".side-container").hide()):!i&&t.autoHideOnFullScreen&&(t.HorizontalToolbarVisible=="top"?(n(".top-menu").show(),n(".bottom-menu").hide(),u.toolbarHeight=n(".top-menu").outerHeight(!0)):t.HorizontalToolbarVisible=="bottom"&&(n(".bottom-menu").show(),n(".top-menu").hide(),u.toolbarHeight=n(".bottom-menu").outerHeight(!0)),n(".side-container").show()))},f=ft.isFullScreen();f?ft.cancelFullScreen():ft.requestFullScreen(document.body,i)}}},lt={ImageSourcetoPrint:function(n){for(var r=n.length,i="",t=0;t<r;t++)i=i+"<div class='print'><img width='1080px' src='"+n[t]+"' /><\/div>";return"<html><head><style type='text/ css'>  @media print {     .print {        page -break-after: always;     }   }<\/style ><script>    function step1(){\n       setTimeout('step2()', 10);}\n    function step2(){window.print();window.close()}\n<\/script><\/head><body onload='step1()'>\n"+i+"<\/body><\/html>"},ImagePrint:function(n){Pagelink="about:blank";var t=window.open(Pagelink,"_new");t.document.open();t.document.write(lt.ImageSourcetoPrint(n));t.document.close()},printSinglePage:function(i){var f=n("<div/>"),r,u;f.css({width:"100%",height:"100%","background-color":"#454545",position:"absolute",left:"0px",top:"0px","z-index":"999"});n(document.body).append(f);r=n("<div/>");r.attr("id","printPage");r.css({width:"100%",height:"100%",position:"absolute",left:"0px",top:"0px","z-index":"-999"});u=n(".flipbook .p"+i+" img").clone();u.css({width:"100%",height:"100%"});r.append(u);n(document.body).append(r);var e=parseInt(u.height()),o=e/t.pageHeight,s=t.pageWidth/o;r.css({width:e});n.print(n("#printPage"));r.remove();f.remove()},printBothPage:function(t,i){var u=n(".flipbook .p"+t+" img").clone(),f=u.attr("src"),e=n(".flipbook .p"+i+" img").clone(),o=e.attr("src"),r=[];r[0]=f;r[1]=o;lt.ImagePrint(r)},printMultiplePage:function(n){for(var i,r=[],u=n.length,t=0;t<u;t++)i=s.pageList[n[t]-1].source,i.length>0&&r.push(i);r.length>0&&lt.ImagePrint(r)}},at={pdfSinglePage:function(t){var f=n(".flipbook .p"+t+" img").get(0),e=at.getImgData(f),i=new jsPDF,r=i.internal,u=r.pageSize,h=r.scaleFactor,o=u.width,s=u.height;i.addImage(e,"JPEG",0,0,o,s);i.save("page_"+t+".pdf")},pdfBothPage:function(t,i){var s=n(".flipbook .p"+t+" img").get(0),h=n(".flipbook .p"+i+" img").get(0),c=at.getImgData(s),l=at.getImgData(h),r=new jsPDF,u=r.internal,f=u.pageSize,a=u.scaleFactor,e=f.width,o=f.height;r.addImage(c,"JPEG",0,0,e,o);r.addPage();r.addImage(l,"JPEG",0,0,e,o);r.save("page_"+t+"-"+i+".pdf")},pdfMultiplePage:function(n){for(var r,f=new Image,i=new jsPDF,e=i.internal,o=e.pageSize,a=e.scaleFactor,c=o.width,l=o.height,h,u=n.length,t=0;t<u;t++)r=s.pageList[n[t]-1].source,r.length>0&&(t>0&&i.addPage(),f.src=r,h=at.getImgData(f),i.addImage(h,"JPEG",0,0,c,l));i.save("selected-pages.pdf")},getImgData:function(n){var t=document.createElement("canvas"),r,i;return document.body.appendChild(t),t.width=n.naturalWidth,t.height=n.naturalHeight,r=t.getContext("2d"),r.drawImage(n,0,0),i=t.toDataURL("image/jpeg").slice(23),i=window.atob(i),document.body.removeChild(t),i}},vi={hashUpdate:function(n){Hash.go("page="+n).update()},hashHandler:function(){Hash.on("^page=([0-9]*)$",{yep:function(n,t){var i=t[1];i!==undefined&&e.turn("is")&&e.turn("page",i)},nop:function(){e.turn("is")&&e.turn("page",1)}})}},kr={limitGutterShadow:function(i){t.rightToLeft=="rtl"&&(i<=1||i>=o.pages?(n(".even .gradient").css("cssText","background-image: url(images/right-shadow.png);"),n(".even .gradient").css("cssText","background-position: right top;"),n(".odd .gradient").css("cssText","background-image: url(images/left-shadow.png);"),n(".odd .gradient").css("cssText","background-position: left top;")):(n(".even .gradient").css("cssText","background-image: url(images/left-shadow.png);"),n(".even .gradient").css("background-position","left top"),n(".odd .gradient").css("cssText","background-image: url(images/right-shadow.png);"),n(".odd .gradient").css("background-position","right top")))}},d={leftDepth:0,rightDepth:16,getThickness:function(n){for(var i,r=0;r<t.tks.length;r++)if(i=t.tks[r],i.begin==0&&(i.begin=1),i.end==0&&(i.end=n),n>=i.begin&&n<=i.end)return i.value;return t.thickness},addBookDepth:function(){var l=0,i,r,u,f,e,s,h,c;l=t.xmlThickness==0?o.pages:t.xmlThickness;t.thickness=d.getThickness(l);i=n("<div/>");i.addClass("leftBookDepth");n("#bookAddit").append(i);n(".leftBookDepth").hide();r=n("<div/>");r.addClass("rightBookDepth");n("#bookAddit").append(r);n(".rightBookDepth").hide();u=n("<div/>");u.addClass("bottomBookDepth_left_1");n("#bookAddit").append(u);n(".bottomBookDepth_left_1").hide();f=n("<div/>");f.addClass("bottomBookDepth_left_2");n("#bookAddit").append(f);n(".bottomBookDepth_left_2").hide();e=n("<div/>");e.addClass("bottomBookDepth_left_3");n("#bookAddit").append(e);n(".bottomBookDepth_left_3").hide();s=n("<div/>");s.addClass("bottomBookDepth_right_1");n("#bookAddit").append(s);n(".bottomBookDepth_right_1").hide();h=n("<div/>");h.addClass("bottomBookDepth_right_2");n("#bookAddit").append(h);n(".bottomBookDepth_right_2").hide();c=n("<div/>");c.addClass("bottomBookDepth_right_3");n("#bookAddit").append(c);n(".bottomBookDepth_right_3").hide();d.updateBookDepth(1)},updateBookDepth:function(i){d.leftDepth=Math.ceil(t.thickness*Math.min(1,i/o.pages));d.rightDepth=Math.ceil(t.thickness*Math.min(1,(o.pages-i)/o.pages));t.rightToLeft=="rtl"?(n(".bottomBookDepth_right_1").show(),n(".bottomBookDepth_right_2").show(),n(".bottomBookDepth_right_3").show(),n(".rightBookDepth").show(),n(".bottomBookDepth_right_1").css({right:-d.leftDepth*2}),n(".bottomBookDepth_right_2").css({right:-d.leftDepth*2}),n(".bottomBookDepth_right_3").css({right:-d.leftDepth*2}),n(".rightBookDepth").css({right:-d.leftDepth*2})):(n(".bottomBookDepth_left_1").show(),n(".bottomBookDepth_left_2").show(),n(".bottomBookDepth_left_3").show(),n(".leftBookDepth").show(),n(".bottomBookDepth_left_1").css({left:-d.leftDepth*2}),n(".bottomBookDepth_left_2").css({left:-d.leftDepth*2}),n(".bottomBookDepth_left_3").css({left:-d.leftDepth*2}),n(".leftBookDepth").css({left:-d.leftDepth*2}));t.rightToLeft=="rtl"?(n(".bottomBookDepth_left_1").show(),n(".bottomBookDepth_left_2").show(),n(".bottomBookDepth_left_3").show(),n(".leftBookDepth").show(),n(".bottomBookDepth_left_1").css({left:-d.rightDepth*2}),n(".bottomBookDepth_left_2").css({left:-d.rightDepth*2}),n(".bottomBookDepth_left_3").css({left:-d.rightDepth*2}),n(".leftBookDepth").css({left:-d.rightDepth*2})):(n(".bottomBookDepth_right_1").show(),n(".bottomBookDepth_right_2").show(),n(".bottomBookDepth_right_3").show(),n(".rightBookDepth").show(),n(".bottomBookDepth_right_1").css({right:-d.rightDepth*2}),n(".bottomBookDepth_right_2").css({right:-d.rightDepth*2}),n(".bottomBookDepth_right_3").css({right:-d.rightDepth*2}),n(".rightBookDepth").css({right:-d.rightDepth*2}));d.limitBookDepth(i)},limitBookDepth:function(i){t.rightToLeft=="rtl"?i<=2?(n(".bottomBookDepth_right_1").hide(),n(".bottomBookDepth_right_2").hide(),n(".bottomBookDepth_right_3").hide(),n(".rightBookDepth").hide()):i>=o.pages-1&&(n(".bottomBookDepth_left_1").hide(),n(".bottomBookDepth_left_2").hide(),n(".bottomBookDepth_left_3").hide(),n(".leftBookDepth").hide()):i<=2?(n(".bottomBookDepth_left_1").hide(),n(".bottomBookDepth_left_2").hide(),n(".bottomBookDepth_left_3").hide(),n(".leftBookDepth").hide()):i>=o.pages-1&&(n(".bottomBookDepth_right_1").hide(),n(".bottomBookDepth_right_2").hide(),n(".bottomBookDepth_right_3").hide(),n(".rightBookDepth").hide())}},rt={bookmarkList:[],addBookmark:function(){var i,r;t.bookmarkWidth=t.bookmarkWidth+12;t.bookmarkWidth<14?t.bookmarkWidth=14:t.bookmarkWidth>60&&(t.bookmarkWidth=60);t.bookmarkHeight=t.bookmarkHeight-10;t.bookmarkHeight<60?t.bookmarkHeight=60:t.bookmarkHeight>160&&(t.bookmarkHeight=160);t.bookmarkFontSize=t.bookmarkFontSize+2;t.bookmarkFontSize<12?t.bookmarkFontSize=12:t.bookmarkFontSize>28&&(t.bookmarkFontSize=28);i=n("<div/>");i.attr("id","leftBookMark");n("#bookAddit").append(i);r=n("<div/>");r.attr("id","rightBookMark");n("#bookAddit").append(r)},updateBookmark:function(){var k=200,ft=-k-d.leftDepth/2,et=-k-d.rightDepth/2,a,y,r,u,i,f;n("#leftBookMark").css({left:ft});n("#rightBookMark").css({right:et});var o=[],s=[],ot=rt.bookmarkList.concat(c.custom_bookmarkList),v=ot;for(a=0;a<v.length;a++){var l=parseInt(v[a].page),g=v[a].content.split(""),nt="";for(y=0;y<g.length;y++)nt+="<div>"+g[y]+"<\/div>";var p="&nbsp;&nbsp;"+nt,w=v[a].color,tt=n.inArray(parseInt(l,10),e.turn("view"))!=-1;l>parseInt(ut.getCurrentPage())&&!tt?s.push({bookmarkWidth:t.bookmarkWidth,bookmarkHeight:t.bookmarkHeight,bookmarkFontSize:t.bookmarkFontSize,bookmarkColor:w,bookmarkPage:l,bookmarkContent:p,bookmarkCurrent:!1}):tt?l%2==0?o.push({bookmarkWidth:t.bookmarkWidth,bookmarkHeight:t.bookmarkHeight,bookmarkFontSize:t.bookmarkFontSize,bookmarkColor:w,bookmarkPage:l,bookmarkContent:p,bookmarkCurrent:!0}):s.push({bookmarkWidth:t.bookmarkWidth,bookmarkHeight:t.bookmarkHeight,bookmarkFontSize:t.bookmarkFontSize,bookmarkColor:w,bookmarkPage:l,bookmarkContent:p,bookmarkCurrent:!0}):o.push({bookmarkWidth:t.bookmarkWidth,bookmarkHeight:t.bookmarkHeight,bookmarkFontSize:t.bookmarkFontSize,bookmarkColor:w,bookmarkPage:l,bookmarkContent:p,bookmarkCurrent:!1})}n("#leftBookMark").empty();n("#rightBookMark").empty();var h=4,b=t.bookmarkWidth-parseInt(t.bookmarkWidth/1.1),it=t.bookmarkHeight+20;for(r=0;r<o.length;r++)i=n("<a/>"),i.css({width:o[r].bookmarkWidth,height:o[r].bookmarkHeight,"font-size":o[r].bookmarkFontSize,"background-color":o[r].bookmarkColor,top:r%h*it+parseInt(r/h)*3,"z-index":"-"+r}),t.rightToLeft=="rtl"?i.css({left:parseInt(r/h)*b}):i.css({right:parseInt(r/h)*b}),i.attr("href","#page="+o[r].bookmarkPage),f=n("<div class='content'/>"),f.html(o[r].bookmarkContent),i.append(f),o[r].bookmarkCurrent?f.addClass("currentBookmark"):f.hasClass("currentBookmark")&&f.removeClass("currentBookmark"),t.rightToLeft=="rtl"?n("#rightBookMark").append(i):n("#leftBookMark").append(i);for(u=0;u<s.length;u++)i=n("<a/>"),i.css({width:s[u].bookmarkWidth,height:s[u].bookmarkHeight,"font-size":s[u].bookmarkFontSize,"background-color":s[u].bookmarkColor,top:u%h*it+parseInt(u/h)*3,"z-index":"-"+u}),t.rightToLeft=="rtl"?i.css({right:parseInt(u/h)*b}):i.css({left:parseInt(u/h)*b}),i.attr("href","#page="+s[u].bookmarkPage),f=n("<div class='content'/>"),f.html(s[u].bookmarkContent),i.append(f),s[u].bookmarkCurrent?f.addClass("currentBookmark"):f.hasClass("currentBookmark")&&f.removeClass("currentBookmark"),t.rightToLeft=="rtl"?n("#leftBookMark").append(i):n("#rightBookMark").append(i);n("#leftBookMark").show();n("#rightBookMark").show();n("#leftBookMark a").hover(function(){n(this).siblings().hide()},function(){n(this).siblings().show()});n("#rightBookMark a").hover(function(){n(this).siblings().hide()},function(){n(this).siblings().show()})},limitBookmark:function(i){t.rightToLeft=="rtl"?i<=1?n("#rightBookMark").hide():i>=o.pages&&n("#leftBookMark").hide():i<=1?n("#leftBookMark").hide():i>=o.pages&&n("#rightBookMark").hide()},resize:function(t){n("#leftBookMark").css({transform:"scale("+t+", "+t+")"});n("#rightBookMark").css({transform:"scale("+t+", "+t+")"})}},et={limit:function(){r.isMobile||t.singlepageMode!="single"&&!t.showFlipTip&&!t.showZoomTip},init:function(){r.isMobile||t.singlepageMode!="single"&&(n(document).tooltip({track:!0,position:{my:"left+15 top+20",at:"left bottom",using:function(t){n(this).css(t);n(this).css({color:o.tooltipColor,"background-color":o.toolTextColor})}}}),et.updateTooltip())},updateTooltip:function(){et.limit();t.showZoomTip?et._setTooltip(r.l("ClickOrDragToZoom")):t.showFlipTip&&et._setTooltip(" ")},_setTooltip:function(i){et.limit();n("#leftPage").off("mouseover").off("mouseout");n("#rightPage").off("mouseover").off("mouseout");var r;t.singlepageMode=="double"?r=e.turn("view")[0]?e.turn("view")[1]?n("#positionElementLayer"):t.rightToLeft=="rtl"?n("#rightPage"):n("#leftPage"):t.rightToLeft=="rtl"?n("#leftPage"):n("#rightPage"):(r=n("#leftPage"),n("#leftPage").css({width:"100%"}),n("#rightPage").hide());r.hover(function(){if(r.attr("title",i),i==" ")var t=setInterval(function(){n('[role="tooltip"]').length>=1&&(clearInterval(t),n('[role="tooltip"]').css({visibility:"hidden"}))},10)},function(){r.attr("title","");r.removeAttr("title")})},inCornerUpdateTooltip:function(){et.limit();t.showFlipTip&&(n("[role='tooltip']").css({visibility:"visible"}),n(".ui-tooltip-content").text(r.l("ClickToFlip")))},outCornerUpdateTooltip:function(){et.limit();t.showZoomTip?(n("[role='tooltip']").css({visibility:"visible"}),n(".ui-tooltip-content").text(r.l("ClickOrDragToZoom"))):t.showFlipTip&&(n(".ui-tooltip-content").text(" "),n('[role="tooltip"]').css({visibility:"hidden"}))}},nt={backgroundSound:null,flippingSound:null,clickSound:null,createAudio:function(){o.AudioEnable&&t.backgroundMusicEnable&&t.backgroundMusicUrl&&(nt.backgroundSound=n("<audio />"),nt.backgroundSound.attr("id","backgroundSound"),nt.backgroundSound.attr("src",t.backgroundMusicUrl),nt.backgroundSound.attr("type","audio/mpeg"),nt.backgroundSound.attr("loop","loop"),nt.backgroundSound.attr("autoplay","autoplay"));o.AudioEnable&&t.flippingSoundEnable&&t.flippingSoundUrl&&(nt.flippingSound=n("<audio />"),nt.flippingSound.attr("id","flippingSound"),nt.flippingSound.attr("src",t.flippingSoundUrl),nt.flippingSound.attr("type","audio/mpeg"));o.AudioEnable&&t.clickEnable&&t.clickUrl&&(nt.clickSound=n("<audio />"),nt.clickSound.attr("id","clickSound"),nt.clickSound.attr("src",t.clickUrl),nt.clickSound.attr("type","audio/mpeg"))},playFlippingSound:function(){o.AudioEnable&&t.flippingSoundEnable&&(nt.flippingSound[0].currentTime=0,nt.flippingSound[0].play())},playClickSound:function(){o.AudioEnable&&t.clickEnable&&(nt.clickSound[0].currentTime=0,nt.clickSound[0].play())}},w={loadAllValue:function(){o.isLocal&&r.isMsBrowser()||(w.loadSettingValue(),w.loadBookmarkValue(),w.loadNotesValue(),w.loadHighlightsValue())},loadSettingValue:function(){o.isLocal&&r.isMsBrowser()||(localStorage.Setting_AudioEnable&&(o.AudioEnable=localStorage.Setting_AudioEnable=="true"?!0:!1),localStorage.Setting_flippingSoundEnable&&(t.flippingSoundEnable=localStorage.Setting_flippingSoundEnable=="true"?!0:!1),localStorage.Setting_autoMoveAfterZoom&&(t.autoMoveAfterZoom=localStorage.Setting_autoMoveAfterZoom=="true"?!0:!1),localStorage.BookData_currentLangs&&(s.currentLangs=localStorage.BookData_currentLangs))},loadBookmarkValue:function(){o.isLocal&&r.isMsBrowser()||(localStorage.CustomElement_custom_bookmarkList?(c.custom_bookmarkList=JSON.parse(localStorage.CustomElement_custom_bookmarkList),c.setMaxIdIndex(c.custom_bookmarkList,"bookmarks_customData_",c.bookmark_id_index)):c.bookmark_id_index=0)},loadNotesValue:function(){o.isLocal&&r.isMsBrowser()||(localStorage.CustomElement_custom_noteList?(c.custom_noteList=JSON.parse(localStorage.CustomElement_custom_noteList),c.setMaxIdIndex(c.custom_noteList,"notes_customData_",c.note_id_index)):c.note_id_index=0)},loadHighlightsValue:function(){o.isLocal&&r.isMsBrowser()||(localStorage.CustomElement_custom_highlightList?(c.custom_highlightList=JSON.parse(localStorage.CustomElement_custom_highlightList),c.setMaxIdIndex(c.custom_highlightList,"highlights_customData_",c.highlight_id_index)):c.highlight_id_index=0)},loadZoomValue:function(){if(!o.isLocal||!r.isMsBrowser())return localStorage.ZoomValue?JSON.parse(localStorage.ZoomValue):void 0},saveAllValue:function(){o.isLocal&&r.isMsBrowser()||(w.saveSettingValue(),w.saveBookmarkValue(),w.saveNotesValue(),w.saveHighlightsValue())},saveSettingValue:function(){o.isLocal&&r.isMsBrowser()||(localStorage.Setting_AudioEnable=o.AudioEnable,localStorage.Setting_flippingSoundEnable=t.flippingSoundEnable,localStorage.Setting_autoMoveAfterZoom=t.autoMoveAfterZoom,localStorage.BookData_currentLangs=s.currentLangs)},saveBookmarkValue:function(){o.isLocal&&r.isMsBrowser()||(localStorage.CustomElement_custom_bookmarkList=JSON.stringify(c.custom_bookmarkList))},saveNotesValue:function(){o.isLocal&&r.isMsBrowser()||(localStorage.CustomElement_custom_noteList=JSON.stringify(c.custom_noteList))},saveHighlightsValue:function(){o.isLocal&&r.isMsBrowser()||(localStorage.CustomElement_custom_highlightList=JSON.stringify(c.custom_highlightList))},saveZoomValue:function(n){o.isLocal&&r.isMsBrowser()||localStorage.setItem("ZoomValue",JSON.stringify(n))}},bt={enterSinglePageMode:function(){n(".thumbnail-container").hide();u.thumbnailHeight=0},onSinglePageModeCursor:function(){var r,t,u,i;n("#previous-button").show();r=e.offset().left-n("#previous-button").offset().left-40;t=n("<div />");t.attr("id","left_arrow_area");t.css({width:r,height:"100%","z-index":"999",position:"absolute",left:"40px",top:"0"});n(".viewport").append(t);n("#next-button").show();u=n(".viewport").width()-e.offset().left-e.width()+40;i=n("<div />");i.attr("id","right_arrow_area");i.css({width:u,height:"100%","z-index":"999",position:"absolute",right:"40px",top:"0"});n(".viewport").append(i);t.hover(function(){t.css("cursor","url(images/cursor-prev.cur), url(http://epagecreator.net/cursor/cursor-prev.cur), e-resize");t.off("click");t.on("click",function(){e.turn("previous")})},function(){t.css("cursor","default");t.off("click")});i.hover(function(){i.css("cursor","url(images/cursor-next.cur), url(http://epagecreator.net/cursor/cursor-next.cur), e-resize");i.off("click");i.on("click",function(){e.turn("next")})},function(){i.css("cursor","default");i.off("click")})},offSinglePageModeCursor:function(){n("#left_arrow_area").remove();n("#right_arrow_area").remove()}},dr={tracking:function(n){(function(n,t,i,r,u,f,e){n.GoogleAnalyticsObject=u;n[u]=n[u]||function(){(n[u].q=n[u].q||[]).push(arguments)};n[u].l=1*new Date;f=t.createElement(i);e=t.getElementsByTagName(i)[0];f.async=1;f.src=r;e.parentNode.insertBefore(f,e)})(window,document,"script","https://www.google-analytics.com/analytics_debug.js","ga");ga("create",n,"auto");ga("send","pageview")}},r={verticalMenuOpened:function(){var t=parseInt(n("#side-plane").css("left"));return t<0?!1:!0},l:function(n,t){return s.langsData[s.currentLangs][n]&&s.langsData[s.currentLangs][n].value?s.langsData[s.currentLangs][n].value:s.langsData.eng[n]&&s.langsData.eng[n].value?s.langsData.eng[n].value:t?t:r.sortWords(n)},sortWords:function(n){for(var i="",t=0;t<n.length;t++)i+=n[t]===n[t].toUpperCase()?" "+n[t]:n[t];return i},notify:function(t){n("<div/>").appendTo(document.body).text(t).addClass("notification ui-state-default ui-corner-bottom").position({my:"center center",at:"center center",of:window}).show({effect:"fade"}).delay(1e3).hide({effect:"fade",duration:"slow"},function(){n(this).remove()})},arrows:function(){n("#previous-button").click(function(){e.turn("previous")});n("#next-button").click(function(){e.turn("next")})},keyboardControl:function(){n(document).keydown(function(t){var i;if(!r.verticalMenuOpened())switch(t.keyCode){case 37:t.preventDefault();e.turn("previous");break;case 39:t.preventDefault();e.turn("next");break;case 122:t.preventDefault();ft.toggleFullScreen();break;case 27:t.preventDefault();b.zoomOut();break;case 13:i=n("#gotoPageInput").is(":focus");i&&u.GotoPage()}})},isMsBrowser:function(){var t=navigator.userAgent,n=!!window.ActiveXObject||"ActiveXObject"in window?!0:!1,i=t.indexOf("Edge")>-1&&!n;return n||i?!0:!1},showLocalRunnigWarning:function(){n(document.body).html("<div class='warningScreen'>You are running this code in File system directly and may not work properly. Host this code in localhost or a server for best results.<\/div>")},check_platform:function(){var n="Unknown OS";return navigator.platform.indexOf("Win")!=-1?n="Windows":navigator.platform.indexOf("Mac")!=-1?n="MacOS":navigator.platform.indexOf("X11")!=-1?n="UNIX":navigator.platform.indexOf("Linux")!=-1&&(n="Linux"),n},isMobile:function(){var n=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(n=!0)}(navigator.userAgent||navigator.vendor||window.opera),n}(),xmlFilter:function(n){return n.indexOf("&apos;")!=-1&&(n=n.replace(/&apos;/g,"'")),n.indexOf("&amp;")!=-1&&(n=n.replace(/&amp;/g,"&")),n.replace(/&/g,"&amp;")},hexToRgba:function(n,t){n=n||"#000000";t=t||1;var i=parseInt(n.slice(1,3),16),r=parseInt(n.slice(3,5),16),u=parseInt(n.slice(5,7),16);return"rgba("+i+", "+r+", "+u+", "+t+")"},calcResizeSize:function(t,i){var r={},f=n(".viewport").width(),e=n(".viewport").height(),o=f/t,s=e/i,u=Math.min(o,s),h=t*u,c=i*u;return r.width=h,r.height=c,r},getCurrentTime:function(){var n=new Date,t="";return t+=n.getMonth()+1+"/",t+=n.getDate()+"/",t+=n.getFullYear()+" ",t+=n.getHours()+":",t+=n.getMinutes()+":",t+n.getSeconds()},getLicenseType:function(n){return n==st.encrypt("standard")?"STANDARD":n==st.encrypt("annual")?"ANNUAL":n==st.encrypt("professional")?"PROFESSIONAL":n==st.encrypt("enterprise")?"ENTERPRISE":n==st.encrypt("global")?"GLOBAL":"TRIAL"},mousewheel:function(){n(document).on("mousewheel DOMMouseScroll",function(n){if(!r.verticalMenuOpened()){var t=n.originalEvent.wheelDelta&&(n.originalEvent.wheelDelta>0?1:-1)||n.originalEvent.detail&&(n.originalEvent.detail>0?-1:1);t>0?i.value()==1&&e.turn("previous"):t<0&&i.value()==1&&e.turn("next")}})}},ct={imageLoaderTimer:null,isLoad:!0,isImgLoad:function(n,t){n.height()===0&&(ct.isLoad=!1);ct.isLoad?(clearTimeout(ct.imageLoaderTimer),t()):(ct.isLoad=!0,ct.imageLoaderTimer=setTimeout(function(){ct.isImgLoad(n,t)},500))}},vt={pageLoaderTimer:null,isLoad:!0,isPageLoad:function(t,i){var r=n(".flipbook .p"+t);r.length==0&&(vt.isLoad=!1);vt.isLoad?(clearTimeout(vt.pageLoaderTimer),i()):(vt.isLoad=!0,vt.pageLoaderTimer=setTimeout(function(){vt.isPageLoad(t,i)},500))}},u={paddingL:.02,paddingR:.2,paddingT:.02,paddingB:.02,toolbarHeight:0,thumbnailHeight:0,verticalMenu:[],horizontalMenu:[],mobileMenu:[],label_toc:"",label_thumbs:"",label_email:"",label_sns:"",label_print:"",label_pdf:"",label_download:"",label_issues:"",label_setting:"",label_about:"",label_close:"",label_help:"",label_info:"",label_back:"",label_forward:"",label_firstpage:"",label_prevpage:"",label_nextpage:"",label_lastpage:"",label_sound:"",label_sound_:"",label_zoom:"",label_zoom_:"",label_autoflip:"",label_search:"",label_bookmark:"",label_notes:"",label_highlight:"",label_highlight_:"",label_fullscreen:"",label_fullscreen_:"",AudioPlayerDialog_position:{x:-1,y:-1},SearchDialog_position:{x:-1,y:-1},BookmarkDialog_position:{x:-1,y:-1},NotesDialog_position:{x:-1,y:-1},init:function(){u.label_toc=r.l("TableOfContents");u.label_thumbs=r.l("ThumbnailView");u.label_email=r.l("ShareThisFlipBook");u.label_sns=r.l("ShareOnSocialNetwork");u.label_print=r.l("Print");u.label_pdf=r.l("SaveAsPDF");u.label_download=r.l("Download");u.label_issues=r.l("PreviousIssues");u.label_setting=r.l("Settings");u.label_about=r.l("AboutUs");u.label_close=r.l("Close");u.label_help=r.l("Help");u.label_info=r.l("MoreInfo");u.label_back=r.l("Back");u.label_forward=r.l("Forward");u.label_firstpage=r.l("FlipToFront");u.label_prevpage=r.l("FlipLeft");u.label_nextpage=r.l("FlipRight");u.label_lastpage=r.l("FlipToBack");u.label_sound=r.l("EnableAudio");u.label_sound_=r.l("DisableAudio");u.label_zoom=r.l("ZoomIn");u.label_zoom_=r.l("ZoomOut");u.label_autoflip=r.l("AutoFlip");u.label_search=r.l("Search");u.label_bookmark=r.l("Bookmark");u.label_notes=r.l("Notes");u.label_highlight=r.l("HighlightOff");u.label_highlight_=r.l("HighlightOn");u.label_fullscreen=r.l("FullScreen");u.label_fullscreen_=r.l("ExitFullScreen");u.verticalMenu=[{name:"toc",label:u.label_toc,icon:kt,visible:!0},{name:"thumbs",label:u.label_thumbs,icon:dt,visible:!0},{name:"email",label:u.label_email,icon:gt,visible:!0},{name:"sns",label:u.label_sns,icon:ni,visible:!0},{name:"print",label:u.label_print,icon:ti,visible:!0},{name:"pdf",label:u.label_pdf,icon:ii,visible:!0},{name:"download",label:u.label_download,icon:ri,visible:!0},{name:"issues",label:u.label_issues,icon:ui,visible:!0},{name:"setting",label:u.label_setting,icon:fi,visible:!0},{name:"about",label:u.label_about,icon:ei,visible:!0},{name:"close",label:u.label_close,icon:oi,visible:!0}];u.horizontalMenu=[{name:"help",label:u.label_help,icon:yi,visible:!0},{name:"info",label:u.label_info,icon:pi,visible:!0},{name:"back",label:u.label_back,icon:wi,visible:!0},{name:"forward",label:u.label_forward,icon:bi,visible:!0},{name:"firstpage",label:u.label_firstpage,icon:ki,visible:!0},{name:"prevpage",label:u.label_prevpage,icon:di,visible:!0},{name:"nextpage",label:u.label_nextpage,icon:gi,visible:!0},{name:"lastpage",label:u.label_lastpage,icon:nr,visible:!0},{name:"sound",label:u.label_sound,dlabel:u.label_sound_,icon:tr,dicon:ir,visible:!0},{name:"zoom",label:u.label_zoom,dlabel:u.label_zoom_,icon:si,dicon:hi,visible:!0},{name:"zoomin",label:u.label_zoom,icon:si,visible:!0},{name:"zoomout",label:u.label_zoom_,icon:hi,visible:!0},{name:"autoflip",label:u.label_autoflip,icon:rr,visible:!0},{name:"search",label:u.label_search,icon:ur,visible:!0},{name:"bookmark",label:u.label_bookmark,icon:fr,visible:!0},{name:"notes",label:u.label_notes,icon:er,visible:!0},{name:"highlight",label:u.label_highlight,dlabel:u.label_highlight_,icon:or,visible:!0},{name:"fullscreen",label:u.label_fullscreen,dlabel:u.label_fullscreen_,icon:sr,dicon:hr,visible:!0}];u.mobileMenu=[{name:"toc",icon:kt},{name:"thumbs",icon:dt},{name:"email",icon:gt},{name:"sns",icon:ni},{name:"print",icon:ti},{name:"pdf",icon:ii},{name:"download",icon:ri},{name:"issues",icon:ui},{name:"setting",icon:fi},{name:"about",icon:ei},{name:"close",icon:oi}]},setLayout:function(){u.init();v.loadAdElement();u.setVerticalToolbarVisible();u.setHorizontalToolbarVisible();u.setThumbnailVisible();u.showVerticalToolbar();u.setWindowColor(n("#plane-container"));u.showHorizontalToolbar();t.horizontalToolbarShowBackground&&t.HorizontalToolbarVisible=="top"?(n("#bottom-container").removeClass("toolbarbg"),n("#top-container").addClass("toolbarbg")):t.horizontalToolbarShowBackground&&t.HorizontalToolbarVisible=="bottom"&&(n("#top-container").removeClass("toolbarbg"),n("#bottom-container").addClass("toolbarbg"));u.setGotoPageController();n("#side-plane-box-close").on("click",function(){a.closeSidePlane()});u.setToolbarButtonHistoryState()},setVerticalToolbarVisible:function(){r.isMobile||(t.VerticalToolbarVisible?n(".side-container").show():n(".side-container").hide())},setHorizontalToolbarVisible:function(){r.isMobile||(t.HorizontalToolbarVisible=="top"?(n("#top-container").show(),n("#bottom-container").hide(),u.toolbarHeight=n(".top-menu").outerHeight(!0)):t.HorizontalToolbarVisible=="bottom"?(n("#bottom-container").show(),n("#top-container").hide(),u.toolbarHeight=n(".bottom-menu").outerHeight(!0)):t.HorizontalToolbarVisible=="none"&&(n("#top-container").hide(),n("#bottom-container").hide(),u.toolbarHeight=0))},setThumbnailVisible:function(){r.isMobile||(t.ThumbnailBarVisible?(n("#thumbnail").show(),u.thumbnailHeight=n(".thumbnail-container").outerHeight(!0)):(n("#thumbnail").hide(),u.thumbnailHeight=0))},showVerticalToolbar:function(){for(var e,i,r,t=0;t<u.verticalMenu.length;t++){e=n("#plane-icon");i=n("<div/>");i.attr("id",u.verticalMenu[t].name);i.attr("title",u.verticalMenu[t].label);r=n("<img />");f["button_icon_"+u.verticalMenu[t].name]?r.attr("src",f["button_icon_"+u.verticalMenu[t].name]):r.attr("src",u.verticalMenu[t].icon);f["button_"+u.verticalMenu[t].name]&&(i.append(r),e.append(i));f["button_"+u.verticalMenu[t].name]?i.show():i.hide();i.on("click",function(){var t=n(this).attr("id");a[t+"_function"]&&a[t+"_function"]()});i.hover(function(t){n(t.currentTarget)&&n(t.currentTarget).addClass("light")},function(t){n(t.currentTarget)&&n(t.currentTarget).removeClass("light")})}f["button_icon_"+u.verticalMenu[0].name]?n("#plane-icon div").css("cssText","margin-bottom: 15px;"):n("#plane-icon div").css("cssText","margin-bottom: -15px;")},showHorizontalToolbar:function(){var e,i,r,o;if(t.HorizontalToolbarVisible=="top")e=n(".top-menu");else if(t.HorizontalToolbarVisible=="bottom")e=n(".bottom-menu");else if(t.HorizontalToolbarVisible=="none")return;if(e){for(i=0;i<u.horizontalMenu.length;i++){r=n("<a />");r.attr("id",u.horizontalMenu[i].name);u.horizontalMenu[i].name!="help"&&r.attr("title",u.horizontalMenu[i].label);o=n("<img />");f["button_icon_"+u.horizontalMenu[i].name]?o.attr("src",f["button_icon_"+u.horizontalMenu[i].name]):o.attr("src",u.horizontalMenu[i].icon);r.append(o);e.append(r);u.horizontalMenu[i].name!="firstpage"&&u.horizontalMenu[i].name!="prevpage"&&u.horizontalMenu[i].name!="nextpage"&&u.horizontalMenu[i].name!="lastpage"&&(f["button_"+u.horizontalMenu[i].name]?(r.show(),u.horizontalMenu[i].name=="fullscreen"&&(ft.support_fullscreen()||r.hide())):r.hide());t.singlepageMode=="single"&&(u.horizontalMenu[i].name=="bookmark"||u.horizontalMenu[i].name=="notes"||u.horizontalMenu[i].name=="highlight")&&r.hide();r.on("click",function(){var t=n(this).attr("id");t!="help"&&yt[t+"_function"]&&yt[t+"_function"]()});r.hover(function(t){n(t.currentTarget)&&n(t.currentTarget).addClass("light")},function(t){n(t.currentTarget)&&n(t.currentTarget).removeClass("light")})}n("#help").on("mouseenter",function(){p.showTips()})}},setGotoPageController:function(){var i=n("<a/>"),r,t;i.attr("id","gotoPageController");n("#prevpage").after(i);r=n("<input/>");r.attr("type","text");r.attr("id","gotoPageInput");i.append(r);u.showCurrentPageText();t=n("<input/>");t.attr("type","image");t.attr("src","images/gotoPageButton.png");t.attr("id","gotoPageButton");t.attr("value",">");i.append(t);t.hide();t.on("click",function(){u.GotoPage()});n("#gotoPageInput").focus(function(){n("#gotoPageInput").val("");n("#gotoPageButton").show()});n("#gotoPageInput").blur(function(){setTimeout(function(){var n=t.css("display");n=="block"&&u.showCurrentPageText()},1e3)})},GotoPage:function(){var t=parseInt(n("#gotoPageInput").val());t&&(e.turn("page",t),u.showCurrentPageText(),n("#gotoPageInput").blur())},showCurrentPageText:function(){var t=ut.getCurrentPageNumber("-"),i=t+" / "+o.pages;n("#gotoPageInput").val(i);n("#gotoPageButton").hide()},setToolbarButtonHistoryState:function(){var t=n("#back"),i=n("#forward");history.length>1?(t.hasClass("dark")&&t.removeClass("dark"),i.hasClass("dark")&&i.removeClass("dark")):(t.addClass("dark"),i.addClass("dark"))},setBgPosition:function(t){var i=n(".book-background");switch(t){case"center":i.css({"background-repeat":"no-repeat"});i.css({"background-position":"center"});break;case"stretch":i.css({"background-repeat":"no-repeat"});i.css({"background-size":"100% 100%"});break;case"fit":i.css({"background-repeat":"no-repeat"});i.css({"background-position":"center"});i.css({"background-size":"cover"});break;case"fill":i.css({"background-repeat":"no-repeat"});i.css({"background-position":"center"});i.css({"background-size":"contain"});break;case"tile":i.css({"background-repeat":"repeat"})}},setWindowColor:function(n){var i=r.hexToRgba(t.windowColor,.7);i?n.css({background:i}):n.css({background:"rgba(0, 0, 0, 0.7)"})},getLabelByHorizontalMenu:function(n){for(var t=0;t<u.horizontalMenu.length;t++)if(u.horizontalMenu[t].name==n)return u.horizontalMenu[t].label;return""},getDlabelByHorizontalMenu:function(n){for(var t=0;t<u.horizontalMenu.length;t++)if(u.horizontalMenu[t].name==n)return u.horizontalMenu[t].dlabel;return""},getIconByHorizontalMenu:function(n){for(var t=0;t<u.horizontalMenu.length;t++)if(u.horizontalMenu[t].name==n)return f["button_icon_"+u.horizontalMenu[t].name]&&f["button_icon_"+u.horizontalMenu[t].name]!=""?f["button_icon_"+u.horizontalMenu[t].name]:u.horizontalMenu[t].icon;return""},getDiconByHorizontalMenu:function(n){for(var t=0;t<u.horizontalMenu.length;t++)if(u.horizontalMenu[t].name==n)return f["button_icon_"+u.horizontalMenu[t].name+"_"]&&f["button_icon_"+u.horizontalMenu[t].name+"_"]!=""?f["button_icon_"+u.horizontalMenu[t].name+"_"]:u.horizontalMenu[t].dicon;return""},resize:function(){u.onResize();n(window).bind("orientationchange resize",function(){u.onResize()})},media_queries:function(){n(window).width()<1e3?n("#book-logo").css("visibility","hidden"):n("#book-logo").css("visibility","visible")},onResize:function(){var l,i,c,w,k;r.isMobile&&(n(".mobileHide").hide(),n("#main").attr("class",""),n("#main").addClass("pure-u-1"),u.thumbnailHeight=0,u.toolbarHeight=0,v.topAdHeight=0);l=n(window).height()-u.thumbnailHeight-u.toolbarHeight-v.topAdHeight;n(".viewport").css("height",l+"px");i=o.bookWidth;t.singlepageMode=="single"&&(i=t.pageWidth);var h=o.bookHeight,a=n(".viewport").width(),y=n(".viewport").height(),d=a/i,g=y/h,p=Math.min(d,g),f=i*p*t.bookSize,s=h*p*t.bookSize;c=i<h||t.singlepageMode=="single"?.01:.08;f-=f*c;s-=s*c;e.turn("size",f,s);w=a/2-f/2-60;k=y/2-s/2;e.css({left:w,top:k});u.media_queries();it.resize();b.resize()}},k={thumbnail_position_val:0,init:function(i){for(var f,u,l,a=n("<ul />"),h=s.pageList,c=0;c<h.length;c++){var y=parseInt(h[c].id),r=e.turn("view",y),v=n.inArray(0,r)!=-1;if(t.singlepageMode=="single"&&(v=!0),f=n("<li />"),f.addClass("dark"),v)f.attr("page_number",r[0]==0?r[1]:r[0]),u=n("<img />"),l=parseInt(r[0]==0?r[1]:r[0])-1,u.attr("src",h[l].thumb),f.append(u),u.attr("data_page","Page:"+r[0]),u.attr("title","Page:"+r[0]),u.css({width:"50%",height:"100%"}),u.click(function(n){k.gotoPage(n)});else{f.attr("page_number",r[0]+"_"+r[1]);var u=n("<img />"),o=n("<img />"),l=parseInt(r[0])-1,p=parseInt(r[1])-1;u.attr("src",h[l].thumb);o.attr("src",h[p].thumb);f.append(u);f.append(o);u.attr("data_page","Page:"+r[0]);o.attr("data_page","Page:"+r[1]);u.attr("title","Page:"+r[0]);o.attr("title","Page:"+r[1]);u.css({width:"50%",height:"100%"});o.css({width:"50%",height:"100%"});u.click(function(n){k.gotoPage(n)});o.click(function(n){k.gotoPage(n)});c++}a.append(f)}i.append(a)},getPageThumbnail:function(i,r){var a=parseInt(i),u=e.turn("view",a),c=n.inArray(0,u)!=-1,f,o,h;if(t.singlepageMode=="single"&&(c=!0),f=n("<div class='pageThumbnail' />"),c)o=n('<img style="display:inline;" />'),h=parseInt(u[0]==0?u[1]:u[0])-1,o.attr("src",s.pageList[h].thumb),f.append(o);else{var o=n('<img style="display:inline;" width="100;" />'),l=n('<img style="display:inline;"  width="100;" />'),h=parseInt(u[0])-1,v=parseInt(u[1])-1;o.attr("src",s.pageList[h].thumb);l.attr("src",s.pageList[v].thumb);f.append(o);f.append(l)}r.append(f)},mouseEvents:function(t){t.find("li").bind(n.mouseEvents.over,function(){n(this).addClass("thumb-hover");n(this).removeClass("dark")}).bind(n.mouseEvents.out,function(){n(this).removeClass("thumb-hover");n(this).addClass("dark")})},arrows:function(){n("#thumbnail-arrow-prev").click(function(){k.thumbnail_position_val+=n(".thumbnail-list-container").width();k.thumbnail_position_val>=0&&(k.thumbnail_position_val=0);n(".thumbnail-list-container ul").css({transform:"scale(0.7, 0.7) translate("+k.thumbnail_position_val+"px)"})});n("#thumbnail-arrow-next").click(function(){k.thumbnail_position_val-=n(".thumbnail-list-container").width();var t=-(s.pageList.length*100);k.thumbnail_position_val<=t&&(k.thumbnail_position_val=t);n(".thumbnail-list-container ul").css({transform:"scale(0.7, 0.7) translate("+k.thumbnail_position_val+"px)"})})},setThumbnailContainer:function(t){t?(n("#thumbnail-button").removeClass("icon-topArrow"),n("#thumbnail-button").addClass("icon-bottomArrow"),n(".thumbnail-container").css({bottom:"0px"})):(n("#thumbnail-button").addClass("icon-topArrow"),n("#thumbnail-button").removeClass("icon-bottomArrow"),n(".thumbnail-container").css({bottom:"-100px"}))},setThumbnailButton:function(){n("#thumbnail-button").on("mouseenter",function(){k.setThumbnailContainer(!0)});n(".thumbnail-container").on("mouseleave",function(){k.setThumbnailContainer(!1)})},updateCurrentPageThumbnailHighlight:function(){var t=ut.getCurrentPageNumber("_");n(".thumbnail-list-container li").each(function(){var i=n(this).attr("page_number");i==t?n(this).removeClass("dark"):n(this).addClass("dark")})},gotoPage:function(t){var r=n(t.currentTarget).attr("data_page"),i;t.currentTarget&&r&&(i=parseInt(r.replace("Page:","")),i==0&&(i=1),e.turn("page",i))},menuMouseEvents:function(t){t.find("li").bind(n.mouseEvents.over,function(){n(this).css({transform:"scale(1.2, 1.2)"});n(this).removeClass("dark")}).bind(n.mouseEvents.out,function(){n(this).css({transform:"scale(0.7, 0.7)"});n(this).addClass("dark")})},setRadio:function(t,i){var r=e.turn("view",i);r.length>1&&(r[0]==0?(n("input[id='"+t+"_left']").attr("disabled",!0),n("input[id='"+t+"_right']").attr("checked",!0),n("input[id='"+t+"_botn']").attr("disabled",!0)):r[1]==0?(n("input[id='"+t+"_left']").attr("checked",!0),n("input[id='"+t+"_right']").attr("disabled",!0),n("input[id='"+t+"_botn']").attr("disabled",!0)):n("input[id='"+t+"_botn']").attr("checked","true"));k.radioEvents(t);n("input[name='"+t+"']").on("click",function(){n("input[name='"+t+"']").each(function(){n(this).attr("checked",!1)});n("input[id='"+t+"_"+n(this).val()+"']").attr("checked",!0);k.radioEvents(t)})},radioEvents:function(t){var i=n("input[name='"+t+"'][checked]").val();i=="left"?(n(".pageThumbnail").find("img").css({border:"none"}),n(".pageThumbnail").find("img").first().css({border:"2px solid #ff0000"})):i=="right"?(n(".pageThumbnail").find("img").css({border:"none"}),n(".pageThumbnail").find("img").last().css({border:"2px solid #ff0000"})):i=="botn"?(n(".pageThumbnail").find("img").css({border:"none"}),n(".pageThumbnail").find("img").css({border:"2px solid #ff0000"})):n(".pageThumbnail").find("img").css({border:"none"})}},a={clickObject:"",isSwitch:!1,plane_container_content:n("#plane-container-content"),toc_function:function(){var o,h,c,t,i,f,l,u;for(a.openSidePlane("toc"),n("#plane-container-content").css({"margin-top":"0px","margin-left":"0px"}),n("#side-plane-box-lable").text(r.l("TableOfContents")),a.plane_container_content.html(""),o=n("<ul/>"),o.attr("id","tree"),h=n("<li/>"),s.contentList.length>0&&h.text(s.contentList[0].title),c=n("<ul/>"),c.attr("id","treeList"),t=0;t<s.contentList.length;t++)if(t!=0){i=n("<li />");i.attr("goto-page",s.contentList[t].page);i.text(s.contentList[t].title);f=n("<div/>");f.addClass("page_div");f.css({float:"right"});f.text(s.contentList[t].page);i.append(f);i.on("click",function(t){if(n(t.currentTarget)){var i=n(t.currentTarget).attr("goto-page");e.turn("page",i)}});c.append(i)}h.append(c);o.append(h);a.plane_container_content.append(o);l=n("<div/>");l.css({clear:"both",float:"right","margin-top":"5px","margin-right":"20px"});u=n("<input/>");u.addClass("ui-button ui-corner-all");u.attr("id","expandCollapseAllButton");u.attr("type","button");u.attr("value",r.l("ExpandCollapseAll"));l.append(u);a.plane_container_content.append(l);n("#tree").treemenu();n(".tree-empty").hover(function(t){n(t.currentTarget)&&n(t.currentTarget).css({"background-color":"rgba(255, 0, 0, 0.4)"})},function(t){n(t.currentTarget)&&n(t.currentTarget).css({"background-color":""})});n("#expandCollapseAllButton").on("click",function(){n(".toggler").first().trigger("click")});n("#expandCollapseAllButton").trigger("click")},thumbs_function:function(){a.openSidePlane("thumbs");n("#plane-container-content").css({"margin-top":"0px","margin-left":"0px"});n("#side-plane-box-lable").text(r.l("ThumbnailView"));a.plane_container_content.html("");var t=n("<div/>");t.attr("id","leftmenuThumbnail");k.init(t);k.menuMouseEvents(t);a.plane_container_content.append(t)},email_function:function(){a.openSidePlane("email");n("#plane-container-content").css({"margin-top":"0px","margin-left":"30px"});n("#side-plane-box-lable").text(r.l("ShareThisFlipBook"));var i='<p id="validateFormTips" style="width:330px; height:20px; text-align:center;" ><\/p><form id="email_form" name="email_form" method="post">  <table width="380">    <tr>      <td width="100" align="left">'+r.l("To")+':<\/td>      <td align="left"><input type="text" id="sendTo" name="sendTo" /><\/td>    <\/tr>    <tr>      <td align="left"><label>'+r.l("YourName")+':<\/label><\/td>      <td align="left"><input type="text" id="yourName" name="yourName" /><\/td>    <\/tr>    <tr>      <td align="left"><label>'+r.l("YourEmail")+':<\/label><\/td>      <td align="left"><input type="text" id="sendFrom" name="sendFrom" /><\/td>    <\/tr>    <tr>      <td align="left"><label>'+r.l("Message")+':<\/label><\/td>      <td align="left"><textarea id="sendMessage" name="sendMessage"><\/textarea><\/td>    <\/tr>    <tr>      <td><\/td>      <td align="right"><input id="sendButton" type="button" class="ui-button ui-corner-all" value="'+r.l("Send")+'"><\/td>    <\/tr>  <\/table><\/form>';a.plane_container_content.html(i);n("#sendTo").focus(function(){n("#sendTo").val()==""?n("#sendTo").val("@"):n("#sendTo").select()});n("#sendFrom").focus(function(){n("#sendFrom").val()==""?n("#sendFrom").val("@"):n("#sendFrom").select()});n("#sendButton").on("click",function(){var e=n("#sendTo").val(),h=n("#yourName").val(),c=n("#sendFrom").val(),f=n("#sendMessage").val(),u=!1,l,v,i,y,a,p;if(u=e==""?!1:!0,u=h==""?!1:!0,u=c==""?!1:!0,u=f==""?!1:!0,l=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,u=l.test(e)==!1?!1:!0,u=l.test(c)==!1?!1:!0,u)n("#validateFormTips").html("Sending Email...").removeClass("ui-state-error").addClass("ui-state-highlight");else{n("#validateFormTips").text(r.l("EmptyInput")).addClass("ui-state-error");n("#validateFormTips").text(r.l("ErrorEmailAddress")).addClass("ui-state-error");return}v=s.pageList;i=window.location.href;i=i.substring(0,i.lastIndexOf("/")+1);y=i+v[0].thumb;f=f+" %0D%0A  %0D%0A "+h+r.l("ShareEmailContent")+' <a href="'+i+' target="_black">'+i+'<a/> %0D%0A %0D%0A <a href="'+i+' target="_black"><img src="'+y+" /><a/>";a=r.l("YourFriend")+" "+h+r.l("ShareEmailTitle");p="tomail="+e+"&frommail="+c+"&subject="+a+"&message="+f+"&yourName="+h;n.ajax({type:"POST",async:!0,dataType:"json",url:t.gateway,data:p,success:function(){n("#sendTo").val("");n("#yourName").val("");n("#sendFrom").val("");n("#sendMessage").val("");n("#validateFormTips").html("<span style='color:#00ff00;'>"+r.l("EmailSendSuccessful")+"<\/span>").removeClass("ui-state-error").addClass("ui-state-highlight")},error:function(){if(o.isLocal)n("#validateFormTips").html("<span style='color:#00ff00;'>"+r.l("EmailSendSuccessful")+"<\/span>").removeClass("ui-state-error").addClass("ui-state-highlight");else{var t="mailto:"+e+"?subject="+a+"&body="+f;win=window.open(t,"emailWindow");win&&win.open&&!win.closed&&win.close()}}})})},sns_function:function(){var t,i,u,f;for(a.openSidePlane("sns"),n("#plane-container-content").css({"margin-top":"30px","margin-left":"30px"}),n("#side-plane-box-lable").text(r.l("ShareOnSocialNetwork")),a.plane_container_content.html(""),t=0;t<s.siteList.length;t++)i=n("<a style='display:inline-block; color:white; margin-right:40px; margin-bottom:30px; text-decoration:none;' />"),i.attr("href",s.siteList[t].href+o.domainUrl),u=n("<img style='margin-right:10px;' />"),u.attr("src",s.siteList[t].logo),f=n("<span />"),f.text(s.siteList[t].name),i.append(u),i.append(f),a.plane_container_content.append(i)},print_function:function(){var u,i;a.openSidePlane("print");n("#plane-container-content").css({"margin-top":"0px","margin-left":"0px"});n("#side-plane-box-lable").text(r.l("Print"));a.plane_container_content.html("");u="";u=t.singlepageMode=="single"?'<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">  <tr>    <td height="50" style="border-bottom:2px solid #fff;border-right:2px solid #fff; padding-left:20px;"><label><input type="radio" name="print" id="print_botn" value="botn" /> '+r.l("PrintCurrentPage")+'<\/label><\/td>    <td id="print_img" rowspan="2" align="center" valign="middle"><\/td>  <\/tr>  <tr>    <td height="100" style="border-right:2px solid #fff; padding-left:20px;"><label><input type="radio" name="print" id="print_select" value="select" /> '+r.l("PrintSelectedPages")+'<\/label><br /><br /><input type="text" id="print_select_text" name="print_select_text" value="1,2" style="width:120px;" /><\/td>  <\/tr>  <tr>    <td colspan="2" style="border-top:2px solid #fff;  padding-right:20px;  padding-top:20px;" align="right" valign="top"><input id="printButton" type="button" class="ui-button ui-corner-all" value="'+r.l("Print")+'"><\/td>  <\/tr><\/table>':'<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">  <tr>    <td width="160" height="50" style="border-bottom:2px solid #fff;border-right:2px solid #fff; padding-left:20px;"><label><input type="radio" name="print" id="print_left" value="left" /> '+r.l("PrintLeftPage")+'<\/label><\/td>    <td id="print_img" rowspan="4" align="center" valign="middle"><\/td>  <\/tr>  <tr>    <td height="50" style="border-bottom:2px solid #fff;border-right:2px solid #fff; padding-left:20px;"><label><input type="radio" name="print" id="print_right" value="right" /> '+r.l("PrintRightPage")+'<\/label><\/td>  <\/tr>  <tr>    <td height="50" style="border-bottom:2px solid #fff;border-right:2px solid #fff; padding-left:20px;"><label><input type="radio" name="print" id="print_botn" value="botn" /> '+r.l("PrintBothPages")+'<\/label><\/td>  <\/tr>  <tr>    <td height="100" style="border-right:2px solid #fff; padding-left:20px;"><label><input type="radio" name="print" id="print_select" value="select" /> '+r.l("PrintSelectedPages")+'<\/label><br /><br /><input type="text" id="print_select_text" name="print_select_text" value="1,2" style="width:120px;" /><\/td>  <\/tr>  <tr>    <td height="50" style="border-top:2px solid #fff;border-right:2px solid #fff; padding-left:20px;"><label><input type="radio" name="print" id="print_all" value="all" /> '+r.l("PrintAllPages")+'<\/label><\/td>  <\/tr>  <tr>    <td colspan="2" style="border-top:2px solid #fff;  padding-right:20px;  padding-top:20px;" align="right" valign="top"><input id="printButton" type="button" class="ui-button ui-corner-all" value="'+r.l("Print")+'"><\/td>  <\/tr><\/table>';a.plane_container_content.html(u);i=ut.getCurrentPage();k.getPageThumbnail(i,n("#print_img"));k.setRadio("print",i);n("#printButton").on("click",function(){var r=n("input[name='print'][checked]").val(),t,u,f,l;if(r=="left")lt.printSinglePage(i);else if(r=="right")lt.printSinglePage(i+1);else if(r=="botn")lt.printBothPage(i,i+1);else if(r=="all"){for(u=[],t=0;t<s.pageList.length;t++)u[t]=t+1;u.length>0&&lt.printMultiplePage(u)}else{var u=[],r=n("#print_select_text").val(),t,e,v=r.length,o,h,c;if(r.indexOf(",")>0){if(r.indexOf("-")<0)u=r.split(",");else for(f="",l=0,t=0;t<v;t++)if(r.charAt(t)==","||t==v-1){if(f=t==v-1?r.substring(l):r.substring(l,t),dashPos=f.indexOf("-"),dashPos>0)for(h=parseInt(f.substring(0,dashPos)),c=parseInt(f.substring(dashPos+1)),e=h;e<=c;e++)u.push(e);else u.push(parseInt(f));l=t+1}}else if(dashPos=r.indexOf("-"),dashPos>0)for(o=0,h=r.substring(0,dashPos),c=r.substring(dashPos+1),t=h;t<=c;t++)u[o]=t,o=o+1;u.length>0&&lt.printMultiplePage(u)}a.closeSidePlane()})},pdf_function:function(){var u,i;a.openSidePlane("pdf");n("#plane-container-content").css({"margin-top":"0px","margin-left":"0px"});n("#side-plane-box-lable").text(r.l("SaveAsPDF"));u="";u=t.singlepageMode=="single"?'<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">  <tr>    <td width="160" height="50" style="border-bottom:2px solid #fff;border-right:2px solid #fff; padding-left:20px;"><label><input type="radio" name="pdf" id="pdf_botn" value="botn" /> '+r.l("Save")+'<\/label><\/td>    <td id="pdf_img" rowspan="3" align="center" valign="middle"><\/td>  <\/tr>  <tr>    <td height="80" style="border-bottom:2px solid #fff; border-right:2px solid #fff; padding-left:20px;"><label><input type="radio" name="pdf" id="print_select" value="select" /> '+r.l("Pages")+'<\/label><br /><br /><input type="text" id="pdf_select_text" name="pdf_select_text" value="1,2" style="width:120px;" /><\/td>  <\/tr>  <tr>    <td height="50" style="border-right:2px solid #fff; padding-left:20px;">':'<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">  <tr>    <td width="160" height="50" style="border-bottom:2px solid #fff;border-right:2px solid #fff; padding-left:20px;"><label><input type="radio" name="pdf" id="pdf_left" value="left" /> '+r.l("SaveLeftPage")+'<\/label><\/td>    <td id="pdf_img" rowspan="5" align="center" valign="middle"><\/td>  <\/tr>  <tr>    <td height="50" style="border-bottom:2px solid #fff; border-right:2px solid #fff; padding-left:20px;"><label><input type="radio" name="pdf" id="pdf_right" value="right" /> '+r.l("SaveRightPage")+'<\/label><\/td>  <\/tr>  <tr>    <td height="50" style="border-bottom:2px solid #fff; border-right:2px solid #fff; padding-left:20px;"><label><input type="radio" name="pdf" id="pdf_botn" value="botn" /> '+r.l("SaveBothPages")+'<\/label><\/td>  <\/tr>  <tr>    <td height="80" style="border-bottom:2px solid #fff; border-right:2px solid #fff; padding-left:20px;"><label><input type="radio" name="pdf" id="print_select" value="select" /> '+r.l("Pages")+'<\/label><br /><br /><input type="text" id="pdf_select_text" name="pdf_select_text" value="1,2" style="width:120px;" /><\/td>  <\/tr>  <tr>    <td height="50" style="border-right:2px solid #fff; padding-left:20px;">';t.pdfUrl&&(u+='<a href="'+t.pdfUrl+'" target="_blank" style="color:#fff;">'+r.l("DownloadEntirePdfFile")+"<\/a>");u+='<\/td>  <\/tr>  <tr>    <td colspan="2" style="border-top:2px solid #fff; padding-right:20px; padding-top:20px;" align="right" valign="top"><input id="pdfButton" type="button" class="ui-button ui-corner-all" value="'+r.l("Save")+'"><\/td>  <\/tr><\/table>';a.plane_container_content.html(u);i=ut.getCurrentPage();k.getPageThumbnail(i,n("#pdf_img"));k.setRadio("pdf",i);n("#pdfButton").on("click",function(){var t=n("input[name='pdf'][checked]").val(),f,c;if(t=="left")at.pdfSinglePage(i);else if(t=="right")at.pdfSinglePage(i+1);else if(t=="botn")at.pdfBothPage(i,i+1);else{var u=[],t=n("#pdf_select_text").val(),r,e,l=t.length,o,s,h;if(t.indexOf(",")>0){if(t.indexOf("-")<0)u=t.split(",");else for(f="",c=0,r=0;r<l;r++)if(t.charAt(r)==","||r==l-1){if(f=r==l-1?t.substring(c):t.substring(c,r),dashPos=f.indexOf("-"),dashPos>0)for(s=parseInt(f.substring(0,dashPos)),h=parseInt(f.substring(dashPos+1)),e=s;e<=h;e++)u.push(e);else u.push(parseInt(f));c=r+1}}else if(dashPos=t.indexOf("-"),dashPos>0)for(o=0,s=t.substring(0,dashPos),h=t.substring(dashPos+1),r=s;r<=h;r++)u[o]=r,o=o+1;u.length>0&&at.pdfMultiplePage(u)}a.closeSidePlane()})},download_function:function(){a.openSidePlane("download");n("#plane-container-content").css({"margin-top":"30px","margin-left":"30px"});n("#side-plane-box-lable").text(r.l("Download"));a.plane_container_content.html("");var i="";t.zipUrl&&(i+='<div id="downloadZip" style="width:80%; border:2px solid #fff; border-radius:10px; padding:10px; cursor:pointer; margin-bottom:15px;">',i+='<a style="color:#fff;" target="_blank" href="'+t.zipUrl+'">',t.zipIcon&&(i+='<img src="'+t.zipIcon+'" />'),i+='<div style="float:right; padding-top:10px; padding-right:50px;">'+r.l("DownloadZip")+"<\/div>",i+="<\/a>",i+="<\/div>");t.exeUrl&&(i+='<div id="downloadExe" style="width:80%; border:2px solid #fff; border-radius:10px; padding:10px; cursor:pointer; margin-bottom:15px;">',i+='<a style="color:#fff;" target="_blank" href="'+t.exeUrl+'">',t.exeIcon&&(i+='<img src="'+t.exeIcon+'" />'),i+='<div style="float:right; padding-top:10px; padding-right:50px;">'+r.l("DownloadExe")+"<\/div>",i+="<\/a>",i+="<\/div>");a.plane_container_content.html(i)},issues_function:function(){var i,t;for(a.openSidePlane("issues"),n("#plane-container-content").css({"margin-top":"0px","margin-left":"0px"}),n("#side-plane-box-lable").text(r.l("PreviousIssues")),a.plane_container_content.html(""),i="",t=0;t<s.issueList.length;t++)if(s.issueList[t].url!=""){i+='<div style="width:90px; height:140px; float:left; background-color:rgba(0, 0, 0, 0.3); text-align:center; overflow:hidden; margin:5px;"><a href="'+s.issueList[t].url+'" target="_blank" style="color:#fff; text-decoration:none;" >';var f="",u=s.issueList[t].url,e=u.split("/"),o=e[e.length-1];f=o.indexOf(".html")!=-1?u.replace(o,"")+"content/thumbs/thumb1.jpg":u.substr(u.length-1,1)=="/"?u+"content/thumbs/thumb1.jpg":u+"/content/thumbs/thumb1.jpg";i+='<img src="'+f+'" width="80" height="110" onerror="javascript:this.src=\'images/blank.gif\'" />';i+='<div style="width:90px; height:20px; overflow:hidden;">'+s.issueList[t].title+"<\/div>";i+="<\/a><\/div>"}a.plane_container_content.html(i)},setting_function:function(){var u,i,f;for(a.openSidePlane("setting"),n("#plane-container-content").css({"margin-top":"0px","margin-left":"0px"}),n("#side-plane-box-lable").text(r.l("Settings")),a.plane_container_content.html(""),w.loadSettingValue(),u="",i=0;i<s.langsFileList.length;i++)u+='<option value="'+s.langsFileList[i].content+'">'+r.l(s.langsFileList[i].content)+"<\/option>";f='<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">  <tr>    <td height="150" style="border-bottom:2px solid #fff;border-right:2px solid #fff; padding-left:20px;">        <label><input id="AudioEnableCheckBok" name="AudioEnableCheckBok" type="checkbox" />'+r.l("EnableAudio")+'<\/label><br /><br />        <label><input id="flippingSoundEnableCheckBok" name="flippingSoundEnableCheckBok" type="checkbox" />'+r.l("EnableFlippingSound")+'<\/label><br /><br />        <label><input id="autoMoveAfterZoomCheckBok" name="autoMoveAfterZoomCheckBok" type="checkbox" />'+r.l("AutoMoveAfterZoom")+"<\/label><br /><br />        <label>"+r.l("SelectLanguage")+'  <select id="selectLangs" name="selectLangs">'+u+'        <\/select><\/label>    <\/td>  <\/tr>  <tr>    <td colspan="2" style="border-top:2px solid #fff;  padding-right:20px;  padding-top:20px;" align="right" valign="top"><input id="settingButton" type="button" class="ui-button ui-corner-all" value="'+r.l("OK")+'"><\/td>  <\/tr><\/table>';a.plane_container_content.html(f);o.AudioEnable?n("#AudioEnableCheckBok").prop("checked",!0):n("#AudioEnableCheckBok").prop("checked",!1);t.flippingSoundEnable?n("#flippingSoundEnableCheckBok").prop("checked",!0):n("#flippingSoundEnableCheckBok").prop("checked",!1);t.autoMoveAfterZoom?n("#autoMoveAfterZoomCheckBok").prop("checked",!0):n("#autoMoveAfterZoomCheckBok").prop("checked",!1);n("#selectLangs").val(s.currentLangs);n("#settingButton").on("click",function(){o.AudioEnable=n("#AudioEnableCheckBok").prop("checked")?!0:!1;t.flippingSoundEnable=n("#flippingSoundEnableCheckBok").prop("checked")?!0:!1;t.autoMoveAfterZoom=n("#autoMoveAfterZoomCheckBok").prop("checked")?!0:!1;var i=n("#selectLangs option:selected").val();s.currentLangs!=i?(s.currentLangs=i,w.saveSettingValue(),window.location.reload()):(w.saveSettingValue(),a.closeSidePlane())})},about_function:function(){var i,u,f,e,o,s,h,c,l,v;a.openSidePlane("about");n("#side-plane-box-lable").text(r.l("AboutUs"));a.plane_container_content.html("");i="";t.companyLogo&&(i='<img width="160px" style="vertical-align:middle" src="'+t.companyLogo+'" />');u="";t.bookTitle&&(u=r.l("BookTitle")+": "+t.bookTitle);f="";t.author&&(f=r.l("BookAuthor")+": "+t.author);e="";t.companyName&&(e=r.l("CompanyName")+": "+t.companyName);o="";t.companyUrl&&(o=r.l("CompanyUrl")+': <a style="color:#fff;" target="_blank" href="'+t.companyUrl+'">'+t.companyUrl);s="";t.companyAddress&&(s=r.l("CompanyAddress")+": "+t.companyAddress);h="";t.email&&(h=r.l("CompanyEmail")+': <a style="color:#fff;" href="mailto:'+t.email+'">'+t.email);c="";t.tel&&(c=r.l("CompanyTel")+": "+t.tel);l="";t.tel&&(l=t.copyright);v='<table width="100%" border="0" cellspacing="0" cellpadding="0" style="font-size:12px;">  <tr>    <td width="160" height="220" rowspan="7" align="center" valign="middle">       <div style="width:160px; height:220px; overflow:hidden; padding-left:20px; padding-top:20px; text-align:center; line-height:110px">'+i+'<\/div><\/td>    <td align="left" valign="middle" style="padding-left:20px; padding-top:5px;">'+f+'<\/td>  <\/tr>  <tr>    <td align="left" valign="middle" style="padding-left:20px; padding-top:5px;">'+e+'<\/td>  <\/tr>  <tr>    <td align="left" valign="middle" style="padding-left:20px; padding-top:5px;">'+u+'<\/td>  <\/tr>  <tr>    <td align="left" valign="middle" style="padding-left:20px; padding-top:5px;">'+o+'<\/td>  <\/tr>  <tr>    <td align="left" valign="middle" style="padding-left:20px; padding-top:5px;">'+s+'<\/a><\/td>  <\/tr>  <tr>    <td align="left" valign="middle" style="padding-left:20px; padding-top:5px;">'+h+'<\/a><\/td>  <\/tr>  <tr>    <td align="left" valign="middle" style="padding-left:20px; padding-top:5px;">'+c+'<\/td>  <\/tr>  <tr>    <td colspan="2" align="left" valign="middle" style="padding-left:20px; padding-top:20px; border-top:2px solid #fff;">'+l+"<\/td>  <\/tr><\/table>";a.plane_container_content.html(v)},close_function:function(){confirm(r.l("ExitConfirm"))&&window.close()},openSidePlane:function(t){a.isSwitch=a.clickObject!=t?!0:!1;a.clickObject=t;var i=parseInt(n("#side-plane").css("left"));a.isSwitch?i<0?n("#side-plane").css({left:"0px"}):(n("#side-plane").css({left:" -460px"}),setTimeout(function(){n("#side-plane").css({left:"0px"})},210)):i<0?n("#side-plane").css({left:"0px"}):n("#side-plane").css({left:" -460px"})},closeSidePlane:function(){n("#side-plane").css({left:"-460px"})},sidePlaneOpened:function(){return!1}},yt={help_function:function(){},info_function:function(){f.button_info&&window.open(t.infoUrl)},back_function:function(){history.go(-1)},forward_function:function(){history.go(1)},firstpage_function:function(){e.turn("page",1)},prevpage_function:function(){e.turn("previous")},nextpage_function:function(){e.turn("next")},lastpage_function:function(){e.turn("page",o.pages)},sound_function:function(){o.AudioEnable=!o.AudioEnable;o.AudioEnable?(n("#sound").attr("title",u.getLabelByHorizontalMenu("sound")),n("#sound img").attr("src",u.getIconByHorizontalMenu("sound"))):(n("#sound").attr("title",u.getDlabelByHorizontalMenu("sound")),n("#sound img").attr("src",u.getDiconByHorizontalMenu("sound")))},zoom_function:function(){o.isZoomState=!o.isZoomState;o.isZoomState?(n("#zoom").attr("title",u.getDlabelByHorizontalMenu("zoom")),n("#zoom img").attr("src",u.getDiconByHorizontalMenu("zoom")),b.zoomIn()):(n("#zoom").attr("title",u.getLabelByHorizontalMenu("zoom")),n("#zoom img").attr("src",u.getIconByHorizontalMenu("zoom")),b.zoomOut())},zoomin_function:function(){b.zoomIn_()},zoomout_function:function(){b.zoomOut_()},autoflip_function:function(){t.autoflip=!t.autoflip;t.autoflip?(n("#autoflip img").addClass("dark"),ht.startAutoFlip()):(n("#autoflip img").removeClass("dark"),ht.stopAutoFlip())},search_function:function(){it.showSearchDialog()},bookmark_function:function(){it.showBookmarkDialog()},notes_function:function(){it.showNotesDialog()},highlight_function:function(){n("#highlight").attr("title",u.getDlabelByHorizontalMenu("highlight"));n("#highlight img").addClass("dark");n(".pageLayer").css("cursor","url(images/btnHighlightBrush.cur), url(http://epagecreator.net/cursor/btnHighlightBrush.cur), crosshair");var t,i,f;n(".pageLayer").off("mousedown");n(".pageLayer").on("mousedown",function(r){var u,e;if(o.isHighlightState=!0,u=-1,n(r.currentTarget)&&(u=n(r.currentTarget).attr("page"),f=u),u!=-1){e=n(".pageLayer[page='"+u+"']");t=r.pageX;i=r.pageY;var h=e.offset().left,c=e.offset().top,l=parseInt(t-h),a=parseInt(i-c),s=n("<div/>");s.attr("id","active_box");s.css({"background-color":"#ff0000",opacity:"0.5",position:"absolute",left:l+"px",top:a+"px"});e.append(s);n(".pageLayer").off("mousedown")}});n(".pageLayer").off("mousemove");n(".pageLayer").on("mousemove",function(r){o.isHighlightState&&n("#active_box")&&n("#active_box").css({width:r.pageX-t+"px",height:r.pageY-i+"px"})});n(".pageLayer").off("mouseup");n(".pageLayer").on("mouseup",function(){if(o.isHighlightState){var t=n("#active_box");t.length>0&&(t.width()<3||t.height()<3?t.remove():(c.highlight_id_index++,c.custom_highlightList.push({id:"highlights_customData_"+c.highlight_id_index,content:"",time:r.getCurrentTime(),page:f,x:parseInt(t.css("left")),y:parseInt(t.css("top")),width:parseInt(t.css("width")),height:parseInt(t.css("height")),color:t.css("background-color")}),w.saveHighlightsValue(),l.showHighlights(f),t.removeAttr("id"),t.remove()));n("#highlight").attr("title",u.getLabelByHorizontalMenu("highlight"));n("#highlight img").removeClass("dark");n(".pageLayer").css("cursor","default");setTimeout(function(){o.isHighlightState=!1},1e3);n(".pageLayer").off("mouseup")}})},fullscreen_function:function(){ft.toggleFullScreen()}},it={showFullScreenDialog:function(){var t=n("<div style='text-align:center;' />"),i;t.attr("id","fullScreen_dialog");i="<p>"+r.l("BestViewInFullScreenMode")+"<\/p>";i+="<p>"+r.l("EnterFullScreen")+"<\/p>";i+="<p style='font-size:11px; color:#ccc;'>"+r.l("EscToExit")+"<\/p>";t.html(i);n("#dialogLayer").append(t);t.dialog({width:400,modal:!0,autoOpen:!0,resizable:!1,closeOnEscape:!0,title:r.l("EnterFullScreen"),close:function(){n(this).remove()},buttons:[{text:r.l("Yes"),click:function(){n(this).dialog("close");ft.toggleFullScreen()}},{text:r.l("No"),click:function(){n(this).dialog("close")}}]})},showPasswordDialog:function(){var i=n("<div style='text-align:center;' />"),r;i.attr("id","password_dialog");r="<p id='validateTips' class='ui-state-highlight'>Please input password below.<\/p>";r+="<input type='password' id='password' name='password' value=''>";i.html(r);n("#dialogLayer").append(i);i.dialog({title:"Please input password below.",autoOpen:!0,resizable:!1,closeOnEscape:!1,height:200,width:300,modal:!0,open:function(){n(".ui-dialog-titlebar-close",n(this).parent()).hide()},close:function(){n(this).remove()},buttons:[{text:"Submit",click:function(){var r=!1,u;n("#password").val().length<1?r=!1:(u=st.encrypt(n("#password").val()),r=u==t.password?!0:!1);r?i.dialog("close"):n("#validateTips").text("Invalid password.").addClass("ui-state-error")}},{text:"Reset",click:function(){n("#validateTips").text("Please input password below.").removeClass("ui-state-error");n("#password").val("").focus()}}]})},showSearchDialog:function(){var t,i,c,l,f,a,h,v,y,p;if(!(n("#search_dialog").length>0)){for(t=n("<div />"),t.css({"text-align":"left","padding-top":"15px","padding-left":"20px",overflow:"hidden"}),t.attr("id","search_dialog"),i='<div class="row"><input type="text" id="search_text" name="search_text" value="" style="width:250px; margin-right:15px;">  <input type="button" id="search_button" class="ui-button ui-corner-all" value="'+r.l("Search")+'" /><\/div>',i+='<div class="row"><label style="margin-right:15px;"><input id="search_page_range" name="search_page_range" type="checkbox" /> '+r.l("PageRange")+"<\/label>",c=o.pages,l="",f=1;f<c+1;f++)l+='<option value="'+f+'">'+f+"<\/option>";for(a="",h=1;h<c+1;h++)a+='<option value="'+h+'">'+h+"<\/option>";i+='<select id="search_min_page" name="search_min_page">'+l+'<\/select> <select id="search_max_page" name="search_max_page">'+a+"<\/select><\/div>";i+='<div class="row"><label><input id="search_match_case" name="search_match_case" type="checkbox" /> '+r.l("MatchCase")+"<\/label><\/div>";i+='<div class="row"><div id="search_results" style="height:420px; display:none; overflow-y:auto;"><\/div><\/div>';t.html(i);n("#dialogLayer").append(t);t.dialog({title:r.l("Search"),closeOnEscape:!1,resizable:!1,width:520,height:170,dialogClass:"plane-dialog",position:{my:"center",at:"center top+150",of:window},open:function(){u.SearchDialog_position.x!=-1&&u.SearchDialog_position.y!=-1&&(n("#search_dialog").parent().css("left",u.SearchDialog_position.x),n("#search_dialog").parent().css("top",u.SearchDialog_position.y),u.SearchDialog_position.x=parseInt(n("#search_dialog").parent().css("left")),u.SearchDialog_position.y=parseInt(n("#search_dialog").parent().css("top")));n(this).keydown(function(t){t.keyCode==13&&n("#search_button").trigger("click")})},close:function(){u.SearchDialog_position.x=parseInt(n("#search_dialog").parent().css("left"));u.SearchDialog_position.y=parseInt(n("#search_dialog").parent().css("top"));n(this).remove()}});u.setWindowColor(n(".ui-dialog"));n("#search_min_page").attr("disabled",!0);n("#search_max_page").attr("disabled",!0);n("#search_min_page").css("opacity","0.5");n("#search_max_page").css("opacity","0.5");n("#search_page_range").on("click",function(){n("#search_page_range").prop("checked")?(n("#search_min_page").attr("disabled",!1),n("#search_max_page").attr("disabled",!1),n("#search_min_page").css("opacity","1"),n("#search_max_page").css("opacity","1")):(n("#search_min_page").attr("disabled",!0),n("#search_max_page").attr("disabled",!0),n("#search_min_page").css("opacity","0.5"),n("#search_max_page").css("opacity","0.5"))});v=function(n,t){for(var u=[],i=-1,r;;)if(r=0,i!=-1&&(r=Math.max(0,i+t.length)),i=n.indexOf(t,r),i>-1&&i+t.length<=n.length)u.push(i);else break;return u};y=function(n,t,i,r){var c=[],s,f;const o=50;for(s=0;s<i.length;s++){var u={content:"",page:r},h=i[s],e=h;n.length<o?u.content=n:(f=h-Math.ceil(Math.max(0,o-t.length)/2),f<0&&(f=0),u.content=n.substr(f,o),e=h-f,f+o<n.length&&(u.content+=" ..."),f>0&&(u.content="... "+u.content,e+=4));u.content=u.content.substr(0,e)+"<span style='color:#FF0000;'>"+u.content.substr(e,t.length)+"<\/span>"+u.content.substr(e+t.length);u.content="<span class='page_number'>"+r+"<\/span> "+u.content;c.push(u)}return c};n("#search_button").on("click",function(){var o=n("#search_text").val().trim(),a,i,h,l,u,w,f,c;if(o!=""){n("#search_results").show();t.animate({height:"530px"});var b=n("#search_page_range").prop("checked"),k=n("#search_min_page").val(),d=n("#search_max_page").val(),p=n("#search_match_case").prop("checked");for(p||(o=o.toLocaleLowerCase()),a=1e4,i=[],h=0;h<s.searchList.length;h++){if(i.length>=a)break;(l=s.searchList[h].pageNumber,b&&(l<k||l>d))||(u=s.searchList[h].text,u=u.replace(/\s+/g," "),u=u.replace(/[\r|\n]+/g," "),p||(u=u.toLocaleLowerCase()),w=v(u,o),i=i.concat(y(u,o,w,l)))}for(i=i.slice(0,a),f="",f+="<div class='table_head'><span class='page_number'>"+r.l("Page")+"<\/span><\/div>",c=0;c<i.length;c++)f+="<p data_page="+i[c].page+">"+i[c].content+"<\/p>";f==""&&(f="No Results Matched");n("#search_results").html(f);n("#search_results p").on("click",function(t){var i=n(t.currentTarget).attr("data_page");t.currentTarget&&i&&(e.turn("page",parseInt(i)),n("#search_dialog").dialog("close"))});n("#search_results p").hover(function(t){n(t.currentTarget)&&n(t.currentTarget).css({"background-color":"rgba(255, 0, 0, 0.4)",cursor:"pointer"})},function(t){n(t.currentTarget)&&n(t.currentTarget).css({"background-color":"",cursor:"default"})})}});p=function(t){var i=!0;n(".ui-dialog-titlebar-close").before("<button type='button' class='minimize-button arrow-opened'><\/button>");n(".minimize-button").on("click",function(){i=!i;i?(n(this).removeClass("arrow-closed"),n(this).addClass("arrow-opened"),t.show()):(n(this).removeClass("arrow-opened"),n(this).addClass("arrow-closed"),t.hide())})};p(n("#search_dialog"))}},showBookmarkDialog:function(){var t,i,h,o,l,v,f,s,a,y,p,b;if(!(n("#bookmark_dialog").length>0)){for(w.loadBookmarkValue(),t=n("<div/>"),t.css({"text-align":"center","padding-top":"15px","padding-left":"20px",overflow:"hidden"}),t.attr("id","bookmark_dialog"),i="",i+='<div class="row"><label style="margin-right:25px;"><input id="bookmark_left" name="bookmark_select" type="radio" /> '+r.l("AddLeftBookmark")+"<\/label>",i+='<label><input id="bookmark_right" name="bookmark_select" type="radio" /> '+r.l("AddRightBookmark")+"<\/label><\/div>",i+='<div class="row"><input type="text" id="bookmark_text" name="bookmark_text" value="" style="margin-right:25px;"><div id="bookmark_colorPicker" class="colorPicker" style="display:inline-block; vertical-align:bottom;"><img id="bookmark_color" src="images/colorPicker.gif" width="22" height="22" /><\/div><\/div>',i+='<div class="row"><input type="button" id="bookmark_save_button" class="ui-button ui-corner-all" style="margin-right:60px;" value="'+r.l("Save")+'" /><input type="button" id="bookmark_removeAll_button" class="ui-button ui-corner-all" value="'+r.l("RemoveAll")+'" /><\/div>',i+='<div class="row"><div id="bookmark_results" style="text-align:left; overflow-y:auto;"><\/div><\/div>',t.html(i),n("#dialogLayer").append(t),t.dialog({title:r.l("Bookmark"),closeOnEscape:!1,resizable:!1,width:500,height:160,dialogClass:"plane-dialog",position:{my:"center",at:"center top+150",of:window},open:function(){u.BookmarkDialog_position.x!=-1&&u.BookmarkDialog_position.y!=-1&&(n("#bookmark_dialog").parent().css("left",u.BookmarkDialog_position.x),n("#bookmark_dialog").parent().css("top",u.BookmarkDialog_position.y),u.BookmarkDialog_position.x=parseInt(n("#bookmark_dialog").parent().css("left")),u.BookmarkDialog_position.y=parseInt(n("#bookmark_dialog").parent().css("top")))},close:function(){u.BookmarkDialog_position.x=parseInt(n("#bookmark_dialog").parent().css("left"));u.BookmarkDialog_position.y=parseInt(n("#bookmark_dialog").parent().css("top"));n("#colorpanel").hide();n(this).remove()}}),u.setWindowColor(n(".ui-dialog")),h="#ffffff",n("#bookmark_color").colorpicker({fillcolor:!0,success:function(t,i){h=i;n("#bookmark_colorPicker").css("background-color",h)}}),o=ut.getCurrentPage(),l=e.turn("view",o),l.length>1&&(l[0]==0?(n("input[id='bookmark_left']").attr("disabled",!0),n("input[id='bookmark_right']").attr("checked",!0)):l[1]==0?(n("input[id='bookmark_left']").attr("checked",!0),n("input[id='bookmark_right']").attr("disabled",!0)):n("input[id='bookmark_left']").attr("checked",!0)),v="",v+="<div class='table_head'><span class='page_number'>"+r.l("Page")+"<\/span><\/div>",n("#bookmark_results").html(v),f=0;f<rt.bookmarkList.length;f++)s=n("<p/>"),s.attr("data_page",rt.bookmarkList[f].page),s.html("<span class='page_number'>"+rt.bookmarkList[f].page+"<\/span> "+rt.bookmarkList[f].content),a=n("<div/>"),a.addClass("bookmark_color_block"),a.css({"background-color":rt.bookmarkList[f].color}),s.append(a),n("#bookmark_results").append(s);y=function(){var t,i,r,u;for(n(".bookmark_customData").remove(),t=0;t<c.custom_bookmarkList.length;t++){i=n("<p/>");i.attr("id",c.custom_bookmarkList[t].id);i.addClass("bookmark_customData");i.attr("data_page",c.custom_bookmarkList[t].page);i.html("<span class='page_number'>"+c.custom_bookmarkList[t].page+"<\/span> "+c.custom_bookmarkList[t].content);r=n("<div/>");r.addClass("bookmark_color_block");r.css({"background-color":c.custom_bookmarkList[t].color});i.append(r);u=n("<div/>");u.addClass("small_del_icon");i.append(u);u.on("click",function(){for(var i=n(this).parent().attr("id"),t=0;t<c.custom_bookmarkList.length;t++)c.custom_bookmarkList[t].id==i&&c.custom_bookmarkList.splice(t,1);n(this).parent().remove();w.saveBookmarkValue();rt.updateBookmark()});n("#bookmark_results").append(i)}};p=function(){var r=rt.bookmarkList.length+c.custom_bookmarkList.length,i=100;i+=r*22;i>=530?(i=530,n("#bookmark_results").css({"overflow-y":"auto"})):n("#bookmark_results").css({"overflow-y":"hidden"});t.animate({height:i})};y();p();n("#bookmark_results p").hover(function(t){n(t.currentTarget)&&n(t.currentTarget).css({"background-color":"rgba(255, 0, 0, 0.4)",cursor:"pointer"})},function(t){n(t.currentTarget)&&n(t.currentTarget).css({"background-color":"",cursor:"default"})});n("#bookmark_results p").on("click",function(t){var i=n(t.currentTarget).attr("data_page");t.currentTarget&&i&&(e.turn("page",parseInt(i)),n("#search_dialog").dialog("close"))});n("#bookmark_save_button").on("click",function(){var t=n("#bookmark_text").val(),i;t!=""&&(o!=1&&(i=n('input:radio[id="bookmark_right"]:checked').val(),i&&(o+=1)),c.bookmark_id_index++,c.custom_bookmarkList.push({id:"bookmarks_customData_"+c.bookmark_id_index,content:t,page:o,color:h}),y(),n("#bookmark_text").val(""),w.saveBookmarkValue(),rt.updateBookmark(),p())});n("#bookmark_removeAll_button").on("click",function(){c.custom_bookmarkList=[];n(".bookmark_customData").remove()});b=function(t){var i=!0;n(".ui-dialog-titlebar-close").before("<button type='button' class='minimize-button arrow-opened'><\/button>");n(".minimize-button").on("click",function(){i=!i;i?(n(this).removeClass("arrow-closed"),n(this).addClass("arrow-opened"),t.show()):(n(this).removeClass("arrow-opened"),n(this).addClass("arrow-closed"),t.hide())})};b(n("#bookmark_dialog"))}},showNotesDialog:function(){var t=n("<div/>"),i,s,h,f,a;t.css({"text-align":"center","padding-top":"15px","padding-left":"20px",overflow:"hidden"});t.attr("id","notes_dialog");i="";i+='<div class="row"><textarea id="notes_text" name="notes_text" style="width:410px; height:80px; color:#000;"><\/textarea><\/div>';i+='<div class="row"><input type="button" id="notes_save_button" class="ui-button ui-corner-all" style="margin-right:100px;" value="'+r.l("Save")+'" /> <input type="button" id="notes_removeAll_button" class="ui-button ui-corner-all" value="'+r.l("RemoveAll")+'" /><\/div>';i+='<div class="row"><div id="notes_results" style="text-align:left; overflow-y:auto;"><\/div><\/div>';t.html(i);n("#dialogLayer").append(t);t.dialog({title:r.l("Notes"),closeOnEscape:!1,resizable:!1,width:500,height:200,dialogClass:"plane-dialog",position:{my:"center",at:"center top+300",of:window},open:function(){u.NotesDialog_position.x!=-1&&u.NotesDialog_position.y!=-1&&(n("#notes_dialog").parent().css("left",u.NotesDialog_position.x),n("#notes_dialog").parent().css("top",u.NotesDialog_position.y),u.NotesDialog_position.x=parseInt(n("#notes_dialog").parent().css("left")),u.NotesDialog_position.y=parseInt(n("#notes_dialog").parent().css("top")))},close:function(){u.NotesDialog_position.x=parseInt(n("#notes_dialog").parent().css("left"));u.NotesDialog_position.y=parseInt(n("#notes_dialog").parent().css("top"));n(this).remove()}});u.setWindowColor(n(".ui-dialog"));s=function(){var r=c.custom_noteList.length,i=140;i+=r*30;i>=530?(i=530,n("#notes_results").css({"overflow-y":"auto"})):n("#notes_results").css({"overflow-y":"hidden"});t.animate({height:i})};h=function(){var t,i,r;for(n(".note_customData").remove(),t=0;t<c.custom_noteList.length;t++){i=n("<p/>");i.attr("id",c.custom_noteList[t].id);i.addClass("note_customData");i.attr("data_page",c.custom_noteList[t].page);i.html("[Page:"+c.custom_noteList[t].page+"] <b style='margin:0 20px;'>"+c.custom_noteList[t].content+"<\/b> <i style='opacity:0.5;'>"+c.custom_noteList[t].time)+"<\/i>";r=n("<div/>");r.addClass("small_del_icon");i.append(r);r.on("click",function(){for(var i=n(this).parent().attr("id"),t=0;t<c.custom_noteList.length;t++)c.custom_noteList[t].id==i&&c.custom_noteList.splice(t,1);n(this).parent().remove();w.saveNotesValue();l.showNotes(ut.getCurrentPage())});n("#notes_results").append(i)}};h();s();n("#notes_results p").hover(function(t){n(t.currentTarget)&&n(t.currentTarget).css({"background-color":"rgba(255, 0, 0, 0.4)",cursor:"pointer"})},function(t){n(t.currentTarget)&&n(t.currentTarget).css({"background-color":"",cursor:"default"})});n("#notes_results p").on("click",function(t){var i=n(t.currentTarget).attr("data_page");t.currentTarget&&i&&(e.turn("page",parseInt(i)),n("#notes_dialog").dialog("close"))});n("#notes_removeAll_button").on("click",function(){c.custom_noteList=[];n(".note_customData").remove();w.saveNotesValue();l.showNotes(ut.getCurrentPage())});f="";n("#notes_save_button").on("click",function(){if(f=n("#notes_text").val(),f!=""){n("#notes_dialog").dialog("close");o.isNoteState=!0;n("#notes img").addClass("dark");n(".pageLayer").css("cursor","url(images/btnNote.cur), url(http://epagecreator.net/cursor/btnNote.cur), all-scroll");n(".pageLayer").off("click");n(".pageLayer").on("click",function(t){var i;if(o.isNoteState&&(i=-1,n(t.currentTarget)&&(i=n(t.currentTarget).attr("page")),i!=-1)){var u=n(".pageLayer[page='"+i+"']"),e=u.offset().left,s=u.offset().top,h=t.pageX,a=t.pageY,v=parseInt(h-e),y=parseInt(a-s);c.note_id_index++;c.custom_noteList.push({id:"notes_customData_"+c.note_id_index,content:f,time:r.getCurrentTime(),page:i,x:v,y:y,width:"28",height:"32"});f="";w.saveNotesValue();l.showNotes(i);n("#notes img").removeClass("dark");n(".pageLayer").css("cursor","default");n(".pageLayer").off("click");setTimeout(function(){o.isNoteState=!1},1e3)}})}});a=function(t){var i=!0;n(".ui-dialog-titlebar-close").before("<button type='button' class='minimize-button arrow-opened'><\/button>");n(".minimize-button").on("click",function(){i=!i;i?(n(this).removeClass("arrow-closed"),n(this).addClass("arrow-opened"),t.show()):(n(this).removeClass("arrow-opened"),n(this).addClass("arrow-closed"),t.hide())})};a(n("#notes_dialog"))},showNoteDialog:function(t){var i=n("<div/>"),u,f,e;i.css({"text-align":"center",overflow:"hidden"});i.attr("id","note_dialog");u="";u+='<div class="row"><textarea id="note_text" style="width:290px; height:80px; color:#000;"><\/textarea><\/div>';u+='<div class="row"><input type="button" id="note_save_button" class="ui-button ui-corner-all" style="margin-right:100px;" value="'+r.l("Save")+'" /> <input type="button" id="note_remove_button" class="ui-button ui-corner-all" value="'+r.l("Delete")+'" /><\/div>';i.html(u);n("#dialogLayer").append(i);i.dialog({title:t.time,width:320,height:190,modal:!0,dialogClass:"plane-dialog",close:function(){n(this).remove()}});f=t.content;f!=""&&n("#note_text").val(f);e=function(){c.DeleteData_noteList(t.id);l.showNotes(t.page);n("#note_dialog").dialog("close")};n("#note_save_button").on("click",function(){var i=n("#note_text").val();i!=""&&(c.UpdateData_noteList(t.id,i),n("#note_dialog").dialog("close"))});n("#note_remove_button").on("click",function(){it.showConfirmDeleteDialog(r.l("DeleteNoteConfirm"),e)})},showHighlightDialog:function(t){var i=n("<div/>"),u,e,f,o;i.css({"text-align":"center",overflow:"hidden"});i.attr("id","highlight_dialog");u="";u+='<div class="row"><textarea id="highlight_text" style="width:250px; height:80px; color:#000;"><\/textarea>';u+='<div id="highlight_colorPicker" class="colorPicker" style="display:inline-block; vertical-align:top;"><img id="highlight_color" src="images/colorPicker.gif" width="22" height="22" /><\/div> <\/div>';u+='<div class="row"><input type="button" id="highlight_save_button" class="ui-button ui-corner-all" style="margin-right:100px;" value="'+r.l("Save")+'" /> <input type="button" id="highlight_remove_button" class="ui-button ui-corner-all" value="'+r.l("Delete")+'" /><\/div>';i.html(u);n("#dialogLayer").append(i);i.dialog({title:t.time,width:320,height:190,modal:!0,dialogClass:"plane-dialog",close:function(){n(this).remove()}});e=t.content;e!=""&&n("#highlight_text").val(e);n("#highlight_colorPicker").css("background-color",t.color);f=t.color;n("#highlight_color").colorpicker({fillcolor:!0,success:function(t,i){f=i;n("#highlight_colorPicker").css("background-color",f)}});o=function(){c.DeleteData_highlightList(t.id);l.showHighlights(t.page);n("#highlight_dialog").dialog("close")};n("#highlight_save_button").on("click",function(){var i="";i=n("#highlight_text").val();c.UpdateData_highlightList(t.id,i,f);n("#highlight_dialog").dialog("close");w.saveHighlightsValue();l.showHighlights(t.page)});n("#highlight_remove_button").on("click",function(){it.showConfirmDeleteDialog(r.l("Delete")+"?",o);w.saveHighlightsValue()})},showConfirmDeleteDialog:function(t,i){var u=n("<div style='text-align:center;' />"),t;u.attr("id","confirmDelete_dialog");t="<p>"+t+"<\/p>";u.html(t);n("#dialogLayer").append(u);u.dialog({width:400,modal:!0,autoOpen:!0,resizable:!1,closeOnEscape:!0,title:"",close:function(){n(this).remove()},buttons:[{text:r.l("Yes"),click:function(){n(this).dialog("close");i()}},{text:r.l("No"),click:function(){n(this).dialog("close")}}]})},showLicenseIsTrialDialog:function(){var t=n("<div/>"),i;t.css({"text-align":"center"});t.attr("id","licenseIsTrial_dialog");i="<p>"+r.l("LicenseIsTrial")+"<\/p>";t.html(i);n("#dialogLayer").append(t);t.dialog({modal:!0,autoOpen:!0,resizable:!1,closeOnEscape:!1,title:"",close:function(){n(this).remove()}});n(t).siblings("div.ui-dialog-titlebar").remove()},showAudioPlayerDialog:function(t,i,f,e,o,s,h){var c;if(!(n("#"+i).length>0)){c=n("<div/>");c.css({"text-align":"center",overflow:"hidden",position:"absolute",left:"-10px",top:"-5px"});c.attr("id",i);n("#dialogLayer").append(c);var l=f*50,a="left top",v="left top+"+l,y=ut.getPageSide(ut.getCurrentPage());y=="right"&&(a="right top",v="right top+"+l);var p=r.calcResizeSize(350,100);c.dialog({title:"",width:330,height:p.height,resizable:!1,draggable:!0,modal:h,dialogClass:"plane-dialog",show:{effect:"fade",duration:500},position:{my:"center",at:"center top+150",of:window},open:function(){u.AudioPlayerDialog_position.x!=-1&&u.AudioPlayerDialog_position.y!=-1&&(n("#"+i).parent().css("left",u.AudioPlayerDialog_position.x),n("#"+i).parent().css("top",u.AudioPlayerDialog_position.y),u.AudioPlayerDialog_position.x=parseInt(n("#"+i).parent().css("left")),u.AudioPlayerDialog_position.y=parseInt(n("#"+i).parent().css("top")));n(this).parent().focus();var r=n("<audio/>");r.draggable();r.attr("src",t);r.attr("autoplay","autoplay");o&&r.attr("loop","loop");s&&r.attr("controls","controls");n(this).append(r)},close:function(){u.AudioPlayerDialog_position.x=parseInt(n("#"+i).parent().css("left"));u.AudioPlayerDialog_position.y=parseInt(n("#"+i).parent().css("top"));n(this).remove()}})}},showVideoPlayerDialog:function(t,i,u,f,e){var o,s,h,c;n("#"+e).length>0||(o=n("<div/>"),o.css({"text-align":"center",overflow:"hidden"}),o.attr("id",e),n("#dialogLayer").append(o),s=640,h=480,u&&f&&(s=u,h=f),c=r.calcResizeSize(s,h),o.dialog({title:"",width:c.width,height:c.height,resizable:!1,draggable:!0,modal:!0,dialogClass:"videoPlayer",show:{effect:"fade",duration:500},hide:{effect:"fade",duration:500},position:{my:"center",at:"center",of:window},open:function(){if(n(this).parent().focus(),i)r=n("<iframe/>"),r.css({width:"100%",height:"100%","object-fit":"fill"}),r.attr("src","http://www.youtube.com/embed/"+i+"?autoplay=1&controls=1&html5=1"),n(this).append(r);else{if(i=="")return;var r=n("<video/>");r.css({width:"100%",height:"100%","object-fit":"fill"});r.attr("src",t);r.attr("autoplay","autoplay");r.attr("controls","controls");n(this).append(r)}},close:function(){o.remove()}}))},showPictureViewerDialog:function(t,i){var e,f,u;if(!(n("#"+i).length>0)){e=function(t,i,u,f){var e=r.calcResizeSize(i,u);t.dialog({title:"",width:e.width,height:e.height,resizable:!1,draggable:!0,modal:!0,dialogClass:"pictureViewer",show:{effect:"scale",duration:500},hide:{effect:"scale",duration:500},position:{my:"center",at:"center",of:window},open:function(){n(this).parent().focus();f.show()},close:function(){t.remove()}})};f=n("<div/>");f.css({overflow:"hidden"});f.attr("id",i);n("#dialogLayer").append(f);u=n("<img/>");u.attr("src",t);u.attr("draggable","false");u.hide();u.on("load",function(){f.append(u)});ct.isImgLoad(u,function(){e(f,u.width(),u.height(),u)})}},showMessageViewerDialog:function(t,i,u,f,e){var s,h,c,o;n("#"+e).length>0||(s=640,h=480,i&&u&&(s=i,h=u),c=r.calcResizeSize(s,h),o=n("<div/>"),o.css({"text-align":"left",overflow:"hidden","background-color":f}),o.attr("id",e),n("#dialogLayer").append(o),o.dialog({title:"",width:c.width,height:c.height,resizable:!1,draggable:!0,modal:!0,dialogClass:"messageViewer",show:{effect:"scale",duration:500},hide:{effect:"scale",duration:500},position:{my:"center",at:"center",of:window},open:function(){n(this).parent().focus();var i=n("<div/>");i.css({padding:"20px"});i.text(t);n(this).append(i)},close:function(){o.remove()}}))},showZoomNavigator:function(){var f,a,o,u,p,y,nt,h,it,g,k,tt;if(!(n("#zoomNavigator_dialog").length>0)){f=n("<div/>");f.css({overflow:"hidden","text-align":"center"});f.attr("id","zoomNavigator_dialog");a="";a+='<div class="row" id="zoomNavigator_icon"><img id="btnZoom100" src="'+yr+'" /><img id="btnFitWindowWidth" src="'+pr+'" /><img id="btnFitZoomOut" src="'+wr+'" /><img id="btnAutoMove" /><\/div>';a+='<div class="row" id="pageSnapshot"><\/div>';a+='<div class="row slider-container"><div class="icon-zoomOut zoomOut_btn"><\/div><div id="zoomNavigator_slider"><\/div><div class="icon-zoomIn zoomIn_btn"><\/div><\/div>';f.html(a);n("#dialogLayer").append(f);f.dialog({title:"",width:320,height:210,dialogClass:"plane-dialog",position:{my:"right top",at:"right-80 top+50",of:window},close:function(){n(this).remove()}});n(f).siblings("div.ui-dialog-titlebar").remove();var c=182,v=92,l=e.turn("view",ut.getCurrentPage()),d=n.inArray(0,l)!=-1;t.singlepageMode=="single"&&(d=!0);o=n("<div/>");o.attr("id","snapshotViewport");d?(c/=2,u=n('<img style="display:inline;" />'),u.css({width:"100%",height:"100%"}),y=parseInt(l[0]==0?l[1]:l[0])-1,u.attr("src",s.pageList[y].thumb),o.append(u)):(u=n('<img style="display:inline;" />'),u.css({width:"50%",height:"100%"}),p=n('<img style="display:inline;" />'),p.css({width:"50%",height:"100%"}),y=parseInt(l[0])-1,nt=parseInt(l[1])-1,u.attr("src",s.pageList[y].thumb),p.attr("src",s.pageList[nt].thumb),o.append(u),o.append(p));o.css({width:c,height:v,overflow:"hidden",position:"relative",margin:"0 auto"});n("#pageSnapshot").append(o);h=n("<div/>");h.addClass("zoomRedBox");n("#snapshotViewport").append(h);h.hide();it=n("#snapshotViewport").width();g=function(){var i,o,s;h.is(":hidden")&&h.show();var a=n(".viewport").width(),y=n(".viewport").height(),r=e.width(),l=e.height(),u=c*(a/r),f=v*(y/l),t=0;t=d?-parseInt(e.offset().left+e.width()/4)*(c/r):-parseInt(e.offset().left)*(c/r);i=-parseInt(e.offset().top)*(v/l);t<=0&&(t=0);i<=0&&(i=0);o=c-6;s=v-6;u>o&&(u=o);f>s&&(f=s);h.css({width:u,height:f,left:t,top:i})};g();n(document.body).on("mousemove",function(){g()});t.autoMoveAfterZoom?(n("#btnAutoMove").attr("src",li),n("#btnAutoMove").attr("title",r.l("AutoMove"))):(n("#btnAutoMove").attr("src",ai),n("#btnAutoMove").attr("title",r.l("ForbiddenAutoMove")));n("#btnZoom100").attr("title",r.l("Fit100"));n("#btnFitWindowWidth").attr("title",r.l("FitWindowWidth"));n("#btnFitZoomOut").attr("title",r.l("ZoomOut"));n("#btnZoom100").on("click",function(){b.zoomOut()});n("#btnFitWindowWidth").on("click",function(){b.zoomOut()});n("#btnFitZoomOut").on("click",function(){b.zoomOut()});n("#btnAutoMove").on("click",function(){t.autoMoveAfterZoom=!t.autoMoveAfterZoom;t.autoMoveAfterZoom?(n("#btnAutoMove").attr("src",li),n("#btnAutoMove").attr("title",r.l("AutoMove"))):(n("#btnAutoMove").attr("src",ai),n("#btnAutoMove").attr("title",r.l("ForbiddenAutoMove")));n(".viewport").zoom("zoomAfterAutoMove",t.autoMoveAfterZoom)});k=function(n){var f=e.turn("size"),o=f.width,s=f.height;e.turn("zoom",n);var f=e.turn("size"),h=f.width,c=f.height,r=(o-h)/2,u=(s-c)/2;t.singlepageMode=="double"?e.turn("view")[0]?e.turn("view")[1]?i.scroll(i.point2D(i.scrollPos.x-r,i.scrollPos.y-u),!1):(t.rightToLeft=="rtl"?(r*=1.5,u*=.75):(r*=.5,u*=.9),i.scroll(i.point2D(i.scrollPos.x-r,i.scrollPos.y-u),!0)):(t.rightToLeft=="rtl"?(r*=.5,u*=.9):(r*=1.5,u*=.75),i.scroll(i.point2D(i.scrollPos.x-r,i.scrollPos.y-u),!0)):i.scroll(i.point2D(i.scrollPos.x-r,i.scrollPos.y-u),!1);rt.resize(n)};tt=e.turn("zoom");n("#zoomNavigator_slider").slider({orientation:"horizontal",min:.2,max:6.1,value:tt,step:.1,slide:function(n,t){k(t.value);w.saveZoomValue(t.value)}});n("#zoomNavigator_slider").slider("float");n(".zoomOut_btn").on("click",function(){var t=parseFloat(n("#zoomNavigator_slider").slider("value"));t-=.1;t=Math.max(t,.2);n("#zoomNavigator_slider").slider("value",t);k(t);w.saveZoomValue(t)});n(".zoomIn_btn").on("click",function(){var t=parseFloat(n("#zoomNavigator_slider").slider("value"));t+=.1;t=Math.min(t,6);n("#zoomNavigator_slider").slider("value",t);k(t);w.saveZoomValue(t)})}},resize:function(){}},b={init:function(){i.zoomMax=t.fitScreenAfterZoom?n(".viewport").width()/o.bookWidth*2:t.defaultZoomScale;i.init()},e_tap:function(n){t.clickToZoom=="singleclick"&&b.clickToZoom(n)},e_doubleTap:function(n){t.clickToZoom=="doubleclick"&&b.clickToZoom(n)},e_zoomIn:function(){r.isMobile||(t.verticalToolbarHideAfterZoom&&n(".side-container").hide(),t.horizontalToolbarHideAfterZoom&&(n(".top-menu").hide(),n(".bottom-menu").hide()),n(".thumbnail-container").hide())},e_zoomOut:function(){r.isMobile||(t.verticalToolbarHideAfterZoom&&n(".side-container").show(),t.horizontalToolbarHideAfterZoom&&(n(".top-menu").show(),n(".bottom-menu").show()),n(".thumbnail-container").show())},e_zoomInComplete:function(){if(!r.isMobile){t.showZoomBox&&it.showZoomNavigator();o.isZoomState=!1;yt.zoom_function();n("#previous-button").css({background:"rgba(0, 0, 0, 0.3)",transform:"scale(2, 2)",left:"40px"});n("#next-button").css({background:"rgba(0, 0, 0, 0.3)",transform:"scale(2, 2)",right:"40px"});n("#previous-button").on("mouseover",function(){n(this).css({background:"rgba(0, 220, 240, 0.3)"})});n("#previous-button").on("mouseout",function(){n(this).css({background:"rgba(0, 0, 0, 0.3)"})});n("#next-button").on("mouseover",function(){n(this).css({background:"rgba(0, 220, 240, 0.3)"})});n("#next-button").on("mouseout",function(){n(this).css({background:"rgba(0, 0, 0, 0.3)"})})}},e_zoomOutComplete:function(){r.isMobile||(n("#zoomNavigator_dialog").dialog("close"),o.isZoomState=!0,yt.zoom_function(),n("#previous-button").css({background:"rgba(0, 0, 0, 0)",transform:"scale(1, 1)",left:"10px"}),n("#next-button").css({background:"rgba(0, 0, 0, 0)",transform:"scale(1, 1)",right:"10px"}),n("#previous-button").off("mouseover"),n("#previous-button").off("mouseout"),n("#next-button").off("mouseover"),n("#next-button").off("mouseout"))},e_swipeLeft:function(){e.turn("next")},e_swipeRight:function(){e.turn("previous")},zoomIn_:function(){b.zoomIn()},zoomOut_:function(){b.zoomOut()},zoomIn:function(){t.limitTo100&&i.value()>=1||i.zoomIn()},zoomOut:function(){i.zoomOut()},dragToZoom:function(){},clickToZoom:function(n){o.isNoteState||o.isHighlightState||(i.value()==1?i.zoomIn(n.pageX,n.pageY):i.zoomOut())},loadedAfterZoom:function(){t.zoomAfterLoaded&&setTimeout(function(){b.zoomIn()},500)},resize:function(){i.resize()},Zoom:function(n){i._eZoom(n)},Pressed:function(n){i._ePressed(n)},Released:function(n){i._eReleased(n)},Start:function(n){i._eStart(n)},Turning:function(n,t,r){i._eTurning(n,t,r)},Turned:function(n,t){i._eTurned(n,t)}},i={zoomMax:2,zoomContainer:n(".viewport"),has3d:!0,axis:null,draggingCur:null,scrollPos:null,dragging:!1,draggingCorner:!1,zoomer:null,zoomerView:"",flipPosition:null,zooming:!1,easeFunction:"ease-in-out",duration:250,page:null,init:function(){i.has3d="WebKitCSSMatrix"in window||"MozPerspective"in document.body.style;axis=i.point2D(0,0);scrollPos=i.point2D(0,0);i.zoomContainer.css({position:"relative",overflow:"hidden"});i.zoomContainer.on("click",i.tap);i.zoomContainer.on("dblclick",i.doubleTap)},tap:function(t){if(!i.draggingCorner&&!i.dragging){var r=n(t.target).attr("id");(r=="leftPage"||r=="rightPage")&&b.e_tap(t)}},doubleTap:function(n){b.e_doubleTap(n)},_prepareZoom:function(){var r=e.turn("view"),o=e.turn("direction"),t={height:e.height()},u,c=0,f,l,h;e.turn("display")=="double"?r[0]?r[1]?(t.width=e.width(),u=i.point2D(e.offset().left-i.zoomContainer.offset().left,e.offset().top-i.zoomContainer.offset().top)):(t.width=e.width()/2,u=i.point2D(o=="ltr"?e.offset().left-i.zoomContainer.offset().left:e.offset().left-i.zoomContainer.offset().left+t.width,e.offset().top-i.zoomContainer.offset().top),c=o=="ltr"?0:t.width):(t.width=e.width()/2,u=i.point2D(o=="ltr"?e.offset().left-i.zoomContainer.offset().left+t.width:e.offset().left-i.zoomContainer.offset().left,e.offset().top-i.zoomContainer.offset().top),c=o=="ltr"?t.width:0):(t.width=e.width(),u=i.point2D(e.offset().left-i.zoomContainer.offset().left,e.offset().top-i.zoomContainer.offset().top));i.zoomer||(i.zoomer=n("<div />",{"class":"zoomer",css:{overflow:"hidden",position:"absolute",zIndex:"101"}}).mousedown(function(){return!1}).appendTo(i.zoomContainer));i.zoomer.css({top:u.y,left:u.x,width:t.width,height:t.height});var s=1/i.value(),a=e.data(),v=r.join(",");if(v!=i.zoomerView)for(i.zoomerView=v,i.zoomer.find("*").remove(),f=0;f<r.length;f++)r[f]&&(l=a.pageObjs[r[f]].offset(),h=n(a.pageObjs[r[f]]),h.clone().transform("").css({width:h.width()*s,height:h.height()*s,position:"absolute",display:"",top:(l.top-e.offset().top)*s,left:(l.left-e.offset().left-c)*s}).appendTo(i.zoomer));return{pos:u,size:t}},zoomIn:function(r,u){var p,nt,k,d,y;if(!i.zooming){i.zooming=!0;p=w.loadZoomValue();p&&(i.zoomMax=p);e.turn("stop");e.css("opacity","0");var s=i._prepareZoom(),l=s.pos,f=i.point2D(s.size.width/2,s.size.height/2),h;h=r&&u?i.point2D(r-l.x-i.zoomContainer.offset().left,u-l.y-i.zoomContainer.offset().top):i.point2D(f.x,f.y);(h.x<0||h.y<0||h.x>s.width||h.y>s.height)&&(h.x=f.x,h.y=f.y);var g=i.point2D((h.x-f.x)*i.zoomMax+f.x,(h.y-f.y)*i.zoomMax+f.y),o=i.point2D(s.size.width*i.zoomMax>i.zoomContainer.width()?h.x-g.x:0,s.size.height*i.zoomMax>i.zoomContainer.height()?h.y-g.y:0),a=i.point2D(Math.abs(s.size.width*i.zoomMax-i.zoomContainer.width()),Math.abs(s.size.height*i.zoomMax-i.zoomContainer.height())),v=i.point2D(Math.min(0,s.size.width*i.zoomMax-i.zoomContainer.width()),Math.min(0,s.size.height*i.zoomMax-i.zoomContainer.height())),c=i.point2D(f.x*i.zoomMax-f.x-l.x-o.x,f.y*i.zoomMax-f.y-l.y-o.y);c.y>a.y?o.y=c.y-a.y+o.y:c.y<v.y&&(o.y=c.y-v.y+o.y);c.x>a.x?o.x=c.x-a.x+o.x:c.x<v.x&&(o.x=c.x-v.x+o.x);c=i.point2D(f.x*i.zoomMax-f.x-l.x-o.x,f.y*i.zoomMax-f.y-l.y-o.y);nt=n.cssPrefix();k={};k[nt+"transition"]="all "+i.easeFunction+" "+i.duration+"ms";d=function(){var r,u;b.e_zoomIn();i.flipPosition=i.point2D(e.css("left"),e.css("top"));e.turn("zoom",i.zoomMax).css({position:"absolute",margin:"",top:0,left:0});i.axis=i.point2D(e.offset().left-i.zoomContainer.offset().left,e.offset().top-i.zoomContainer.offset().top);t.singlepageMode=="double"&&(e.turn("view")[0]?e.turn("view")[1]||t.rightToLeft=="rtl"&&(i.axis.x+=e.width()/2):t.rightToLeft=="rtl"||(i.axis.x+=e.width()/2));i.scroll(c,!1);i.zoomContainer.on("mousedown",i._eMouseDown);i.zoomContainer.on("mousemove",i._eMouseMove);n(document.body).on("mouseup",i._eMouseUp);i.zoomContainer.on("mousewheel",i._eMouseWheel);t.singlepageMode=="double"?e.turn("view")[0]?e.turn("view")[1]||(r=t.rightToLeft=="rtl"?n("#rightPage").offset().left:n("#leftPage").offset().left):r=t.rightToLeft=="rtl"?n("#leftPage").offset().left:n("#rightPage").offset().left:r=n("#leftPage").offset().left;u=i.zoomer.offset().left-(i.zoomer.offset().left-r);i.zoomer.offset({left:u});setTimeout(function(){i.zoomer.hide();i.zoomer.remove();i.zoomer=null;i.zoomerView=null;e.css("opacity","1")},i.duration);rt.resize(i.zoomMax);t.singlepageMode=="single"&&bt.offSinglePageModeCursor();b.e_zoomInComplete()};i.zoomer.css(k).show();y=n.cssTransitionEnd();y?i.zoomer.bind(y,function(){n(this).unbind(y);d()}):setTimeout(d,i.duration);t.singlepageMode=="double"&&(e.turn("view")[0]?e.turn("view")[1]||t.rightToLeft=="rtl"||(o.x+=s.size.width*i.zoomMax/4):t.rightToLeft=="rtl"||(o.x-=s.size.width*i.zoomMax/4));i.zoomer.transform(i.translate(o.x,o.y)+i.scale(i.zoomMax))}},zoomOut:function(){var c,l,f,r,u,a,o,s,h;i.zooming&&(i.zooming=!1,i.zoomContainer.off("mousedown",i._eMouseDown),i.zoomContainer.off("mousemove",i._eMouseMove),n(document.body).off("mouseup",i._eMouseUp),i.zoomContainer.off("mousewheel",i._eMouseWheel),c=n.cssPrefix(),l={},l[c+"transition"]="all "+i.easeFunction+" "+i.duration+"ms",e.css(l),f=1/i.zoomMax,r=n("<div />",{css:{position:"relative",top:i.flipPosition.y,left:i.flipPosition.x,width:e.width()*f,height:e.height()*f,background:"blue"}}).appendTo(e.parent()),u=i.point2D(r.offset().left-i.zoomContainer.offset().left,r.offset().top-i.zoomContainer.offset().top),t.singlepageMode=="double"&&(e.turn("view")[0]?e.turn("view")[1]||t.rightToLeft=="rtl"||(u.x=e.turn("direction")=="ltr"?u.x+r.width()/4:u.x-r.width()/4):t.rightToLeft=="rtl"||(u.x=e.turn("direction")=="ltr"?u.x-r.width()/4:u.x+r.width()/4)),a=n.findPos(e[0]),o=i.point2D(-e.width()/2-a.left+r.width()/2+u.x+i.zoomContainer.offset().left,-e.height()/2-a.top+r.height()/2+u.y+i.zoomContainer.offset().top),r.remove(),s=function(){var n;b.e_zoomOut();e[0].style.removeProperty?(e[0].style.removeProperty(c+"transition"),e.transform(e.turn("options").acceleration?i.translate(0,0):"").turn("zoom",1),e[0].style.removeProperty("margin"),n=i.flipPosition.x,t.singlepageMode=="double"&&(e.turn("view")[0]?e.turn("view")[1]||t.rightToLeft=="rtl"||(n=parseFloat(i.flipPosition.x)+parseFloat(e.width()/4)):t.rightToLeft=="rtl"||(n=parseFloat(i.flipPosition.x)-parseFloat(e.width()/4))),e.css({position:"relative",top:i.flipPosition.y,left:n}),e.animate({left:i.flipPosition.x})):(n=i.flipPosition.x,t.singlepageMode=="double"&&(e.turn("view")[0]?e.turn("view")[1]||t.rightToLeft=="rtl"||(n=parseFloat(i.flipPosition.x)+parseFloat(e.width()/4)):t.rightToLeft=="rtl"||(n=parseFloat(i.flipPosition.x)-parseFloat(e.width()/4))),e.transform("none").turn("zoom",1).css({margin:"",top:i.flipPosition.y,left:n,position:"relative"}),e.animate({left:i.flipPosition.x}));rt.resize(1);t.singlepageMode=="single"&&bt.onSinglePageModeCursor();b.e_zoomOutComplete()},h=n.cssTransitionEnd(),i.duration===0?s():h?(e.bind(h,function(){n(this).unbind(h);s()}),e.transform(i.translate(o.x,o.y)+i.scale(f))):(setTimeout(s,duration),e.transform(i.translate(o.x,o.y)+i.scale(f))))},scroll:function(n,t){if(e.css({top:-i.axis.y-n.y,left:-i.axis.x-n.x}),!t){var u=i.flipbookWidth(),r,f=i.point2D(Math.min(0,(u-i.zoomContainer.width())/2),Math.min(0,(e.height()-i.zoomContainer.height())/2)),o=i.point2D(u>i.zoomContainer.width()?u-i.zoomContainer.width():(u-i.zoomContainer.width())/2,e.height()>i.zoomContainer.height()?e.height()-i.zoomContainer.height():(e.height()-i.zoomContainer.height())/2);n.y<f.y?(n.y=f.y,r=!0):n.y>o.y&&(n.y=o.y,r=!0);n.x<f.x?(n.x=f.x,r=!0):n.x>o.x&&(n.x=o.x,r=!0);r&&i.scroll(n,!0)}i.scrollPos=i.point2D(n.x,n.y)},_eMouseDown:function(n){i.draggingCur=i.point2D(n.pageX,n.pageY)},_eMouseMove:function(n){if(i.draggingCur){i.dragging=!0;var t=i.point2D(n.pageX,n.pageY),r=i.point2D(t.x-i.draggingCur.x,t.y-i.draggingCur.y);i.scroll(i.point2D(i.scrollPos.x-r.x,i.scrollPos.y-r.y),!0);i.draggingCur=t}},_eMouseUp:function(){i.dragging&&i.scroll(i.scrollPos);i.draggingCur=null;setTimeout(function(){i.dragging=!1},1)},_eMouseWheel:function(r){var u=r.originalEvent.wheelDelta&&(r.originalEvent.wheelDelta>0?1:-1)||r.originalEvent.detail&&(r.originalEvent.detail>0?-1:1),f;t.mouseWheelZoom?(f=i.point2D(i.scrollPos.x,i.scrollPos.y-u*10),i.scroll(f,!1)):u>0?n(".zoomIn_btn").trigger("click"):u<0&&n(".zoomOut_btn").trigger("click")},_eZoom:function(){},_ePressed:function(){i.draggingCorner=!0},_eReleased:function(){setTimeout(function(){i.draggingCorner=!1},1)},_eStart:function(){},_eTurning:function(){i.page=e.turn("page");i.value()!=1&&setTimeout(function(){i.resize()},0)},_eTurned:function(n,t){i.value()!=1&&(t>i.page?i.scroll(i.point2D(0,i.scrollPos.y),!1):t<i.page&&i.scroll(i.point2D(e.width(),i.scrollPos.y),!1))},resize:function(){i.value()>1},flipbookWidth:function(){var n=e.width(),t=e.turn("view");return e.turn("display")!="double"||t[0]&&t[1]||(n=e.width()/2),n},isPage:function(n,t){return n[0]==t[0]?!1:n.attr("page")?!0:n.parent()[0]?i.isPage(n.parent(),t):!1},value:function(){return e.turn("zoom")},translate:function(n,t){return i.has3d?" translate3d("+n+"px,"+t+"px, 0px) ":" translate("+n+"px, "+t+"px) "},scale:function(n){return i.has3d?" scale3d("+n+", "+n+", 1) ":" scale("+n+") "},point2D:function(n,t){return{x:n,y:t}}},pt={isVertical:!0,visibleState:!0,init:function(){var i=n("<div />"),r,e,o,t,s;for(i.attr("id","mobileMenu"),i.css({position:"absolute",top:"0",left:"0","z-index":"999"}),pt.isVertical?i.css({width:"100%",height:"100px"}):i.css({width:"100px",height:"100%"}),n(".viewport").append(i),r=n("<a />"),r.attr("id","list-btn"),pt.isVertical?r.css({float:"left",margin:"6px"}):r.css({margin:"12px"}),e=n("<img />"),e.addClass("center"),e.attr("src",br),r.append(e),i.append(r),o=0;o<u.mobileMenu.length;o++){t=n("<a />");t.attr("id",u.mobileMenu[o].name);t.addClass("mobileMenuItem");pt.isVertical?t.css({float:"left",margin:"6px"}):t.css({margin:"12px"});s=n("<img />");s.addClass("center");s.attr("src",u.mobileMenu[o].icon);t.append(s);i.append(t);f["button_"+u.mobileMenu[o].name]?t.show():t.hide();t.on("click",function(){var t=n(this).attr("id");a[t+"_function"]&&a[t+"_function"]();yt[t+"_function"]&&yt[t+"_function"]()})}r.on("click",function(){pt.visibleState?(pt.visibleState=!1,e.css({transform:"rotate(90deg)"}),n(".mobileMenuItem").each(function(){n(this).fadeOut()})):(pt.visibleState=!0,e.css({transform:"rotate(0deg)"}),n(".mobileMenuItem").each(function(){n(this).fadeIn()}))})}},c={custom_bookmarkList:[],custom_noteList:[],custom_highlightList:[],bookmark_id_index:0,note_id_index:0,highlight_id_index:0,DeleteData_noteList:function(n){for(var t=0;t<c.custom_noteList.length;t++)c.custom_noteList[t].id==n&&c.custom_noteList.splice(t,1);w.saveNotesValue()},UpdateData_noteList:function(n,t){for(var i=0;i<c.custom_noteList.length;i++)c.custom_noteList[i].id==n&&(c.custom_noteList[i].content=t,c.custom_noteList[i].time=r.getCurrentTime());w.saveNotesValue()},DeleteData_highlightList:function(n){for(var t=0;t<c.custom_highlightList.length;t++)c.custom_highlightList[t].id==n&&c.custom_highlightList.splice(t,1);w.saveHighlightsValue()},UpdateData_highlightList:function(n,t,i){for(var u=0;u<c.custom_highlightList.length;u++)c.custom_highlightList[u].id==n&&(c.custom_highlightList[u].content=t,c.custom_highlightList[u].color=i,c.custom_highlightList[u].time=r.getCurrentTime());w.saveHighlightsValue()},setMaxIdIndex:function(n,t,i){for(var f,r=0,u=0;u<n.length;u++)f=parseInt(n[u].id.replace(t,"")),r<f&&(r=f);i=r}},v={mainAd:{},topAd:{},rightAd:{},topAdHeight:0,loadAdElement:function(){r.isMobile||(v.mainAd.has&&v.showMainAd(),v.topAd.has&&v.showTopAd(),v.rightAd.has&&v.showRightAd())},showMainAd:function(){var i,u,f,e;if(!r.isMobile){if(i=n("<a/>"),i.css({display:"block",position:"absolute",top:"0",width:"50%",height:"100%",overflow:"hidden"}),t.rightToLeft=="rtl"?i.css({right:"0"}):i.css({left:"0"}),i.attr("id","mainAd"),u=v.mainAd.url,u.indexOf(".swf")!=-1){i.flash({swf:u,height:"100%",width:"100%",wmode:"transparent"});f=n("<div/>");f.css({position:"absolute",top:"0",left:"0",width:"100%",height:"100%"});i.append(f);f.on("click",function(){window.open(v.mainAd.href,"_blank")})}else e=n("<img/>"),e.attr("src",u),i.append(e),i.attr("href",v.mainAd.href);n("#main-ad-position").append(i)}},showTopAd:function(){var u,i,t,f,e;if(!r.isMobile){for(u=0,i=0;i<v.topAd.pics.length;i++)u<parseInt(v.topAd.pics[i].height)&&(u=parseInt(v.topAd.pics[i].height));v.topAdHeight=u;v.topAdHeight>n(window).height()/3&&(v.topAdHeight=n(window).height()/3);t=n("<div/>");t.attr("id","top-ad");t.css({width:"100%",height:v.topAdHeight,overflow:"hidden"});n("#top-ad-position").append(t);v.topAd.position=="left"?t.css("text-align","left"):v.topAd.position=="center"?t.css("text-align","center"):v.topAd.position=="right"&&t.css("text-align","right");v.topAd.slideShow?(f=v.showAdSlideshowPlayerInPage(v.topAd.pics),t.append(f)):(e=v.showAdTile(v.topAd.pics),t.append(e))}},showRightAd:function(){var u,i,e,t,o,s;if(!r.isMobile){for(u=0,i=0;i<v.rightAd.pics.length;i++)u<parseInt(v.rightAd.pics[i].width)&&(u=parseInt(v.rightAd.pics[i].width));var h=n(window).width(),c=u/h,f=Math.round(24*c);f>=8&&(f=8);e=23-f;n("#main").attr("class","");n("#main").addClass("pure-u-"+e+"-24");n("#right-ad-position").addClass("pure-u-"+f+"-24");n("#right-ad-position").show();t=n("<div/>");t.attr("id","right-ad");t.css({position:"absolute",top:"0px",right:"0px",display:"table-cell",width:"100%",height:"100%","text-align":"right",overflow:"hidden"});n("#right-ad-position").append(t);v.rightAd.position=="top"?t.css("vertical-align","top"):v.rightAd.position=="middle"?t.css("vertical-align","middle"):v.rightAd.position=="bottom"&&t.css("vertical-align","bottom");v.rightAd.slideShow?(o=v.showAdSlideshowPlayerInPage(v.rightAd.pics),t.append(o)):(s=v.showAdTile(v.rightAd.pics),t.append(s))}},showAdSlideshowPlayerInPage:function(t){var i=0,u=n("<div/>"),f=n("<img/>"),r,o,c;f.css({width:t[0].width,height:t[0].height});u.append(f);var s=[],e=[],h=[];for(r=0;r<t.length;r++)s.push(t[r].url),e.push(t[r].href),h.push(t[r].time);return o=function(n){f.attr("src",s[n]);e[n]?u.css("cursor","pointer"):u.css("cursor","default");u.on("click",function(){window.open(e[i],"_blank")})},c=function(){setInterval(function(){f.fadeOut("slow",function(){i>=t.length?i=0:i++;o(i);f.fadeIn("slow")})},parseInt(h[i])*1e3)},o(i),c(),u},showAdTile:function(t){var u=n("<div/>"),i,r,f;for(u.css({width:"100%",height:"100%",overflow:"hidden"}),i=0;i<t.length;i++){r=n("<img/>");r.css({"margin-right":"10px","margin-bottom":"10px",cursor:"pointer"});r.attr("src",t[i].url);f=t[i].href;r.on("click",function(){window.open(f,"_blank")});u.append(r)}return u}},l={buttonId:0,hotlinkId:0,videoId:0,slideshowId:0,pageSoundId:0,buttonList:[],hotlinkList:[],videoList:[],slideshowList:[],pageSoundList:[],loadPositionElement:function(i){var r;t.singlepageMode=="double"?r=t.rightToLeft=="rtl"?e.turn("view")[0]?e.turn("view")[1]?i%2==0?n("#rightPage"):n("#leftPage"):n("#rightPage"):n("#leftPage"):e.turn("view")[0]?e.turn("view")[1]?i%2==0?n("#leftPage"):n("#rightPage"):n("#leftPage"):n("#rightPage"):(r=n("#leftPage"),n("#leftPage").css({width:"100%"}),n("#rightPage").hide());r.attr("page",i);l.buttonId=0;l.hotlinkId=0;l.videoId=0;l.slideshowId=0;l.pageSoundId=0;l.showButtons(i);l.showHotlinks(i);l.showVideos(i);l.showSlideshows(i);l.showPageSounds(i);l.showNotes(i);l.showHighlights(i)},showButtons:function(n){for(var i,t=0;t<l.buttonList.length;t++)i=parseInt(l.buttonList[t].page),i==n&&(l.buttonId++,l.addButtons(l.buttonList[t],n,l.buttonId))},showHotlinks:function(n){for(var i,t=0;t<l.hotlinkList.length;t++)i=parseInt(l.hotlinkList[t].page),i==n&&(l.hotlinkId++,l.addHotlinks(l.hotlinkList[t],n,l.hotlinkId))},showVideos:function(n){for(var i,t=0;t<l.videoList.length;t++)i=parseInt(l.videoList[t].page),i==n&&(l.videoId++,l.addVideos(l.videoList[t],n,l.videoId))},showSlideshows:function(n){for(var i,t=0;t<l.slideshowList.length;t++)i=parseInt(l.slideshowList[t].page),i==n&&(l.slideshowId++,l.addSlideshows(l.slideshowList[t],n,l.slideshowId))},showPageSounds:function(n){for(var i,t=0;t<l.pageSoundList.length;t++)i=parseInt(l.pageSoundList[t].page),i==n&&(l.pageSoundId++,l.addPageSounds(l.pageSoundList[t],n,l.pageSoundId))},showNotes:function(t){var r=n(".pageLayer[page='"+t+"']"),i,u;if(!(r.length<=0))for(r.find(".positionElement_note").remove(),i=0;i<c.custom_noteList.length;i++)u=parseInt(c.custom_noteList[i].page),u==t&&l.addNotes(c.custom_noteList[i],t)},showHighlights:function(t){var r=n(".pageLayer[page='"+t+"']"),i,u;if(!(r.length<=0))for(r.find(".positionElement_highlight").remove(),i=0;i<c.custom_highlightList.length;i++)u=parseInt(c.custom_highlightList[i].page),u==t&&l.addHighlights(c.custom_highlightList[i],t)},addButtons:function(i,r,u){var o=n(".pageLayer[page='"+r+"']"),f,s,h,c;if(!(o.length<=0)){if(f=n("<a />"),f.css({display:"block",cursor:"pointer",position:"absolute",top:Math.round(i.y/t.pageHeight*100)+"%",left:Math.round(i.x/t.pageWidth*100)+"%",width:Math.round(i.width/t.pageWidth*100)+"%",height:Math.round(i.height/t.pageHeight*100)+"%"}),f.attr("target",i.target),f.attr("title",i.rolloverText),i.rollover=="zoom"){f.on("mouseover",function(){n(this).addClass("position-element-zoom")});f.on("mouseout",function(){n(this).removeClass("position-element-zoom")})}else if(i.rollover=="light"){f.on("mouseenter",function(){f.empty();var t=n("<div />");t.css({position:"absolute",top:"0",left:"0",right:"0",bottom:"0",margin:"auto",display:"block",width:"90%",height:"90%"});f.append(t);t.addClass("position-element-light")});f.on("mouseleave",function(){f.empty()})}if(i.type!="none"&&f.css({"background-image":"url("+i.image+")","background-repeat":"no-repeat","background-size":"100% 100%"}),o.append(f),i.type=="audio")f.on("click",function(){g.showAudioPlayer(i.destination,"audio_"+r+"_"+u,u,r)});else if(i.type=="video")f.on("click",function(){g.showVideoPlayer(i.destination,i.youtubeId,i.popupWidth,i.popupHeight,"video_"+r+"_"+u)});else if(i.type=="image")f.on("click",function(){g.showPictureViewer(i.destination,"image_"+r+"_"+u)});else if(i.type=="message")f.on("click",function(){g.showMessageViewer(i.text,i.popupWidth,i.popupHeight,i.windowColor,"message_"+r+"_"+u)});else if(i.type=="none")i.image.indexOf(".swf")!=-1?(s=g.showSwfPlayerInPage(i.image,"swf_"+r+"_"+u),f.append(s)):(h=g.showPictureViewerInPage(i.image,"image_page_"+r+"_"+u),f.append(h));else if(i.destination&&i.destination.indexOf("page:")!=-1){c=parseInt(i.destination.replace("page:",""));f.on("click",function(){e.turn("page",c)})}else f.attr("href",i.destination)}},addHotlinks:function(i,r,u){var o=n(".pageLayer[page='"+r+"']"),s;if(!(o.length<=0)){var f=n("<a />"),h=Math.round(i.y/t.pageHeight*100),c=Math.round(i.x/t.pageWidth*100),l=Math.round(i.width/t.pageWidth*100),a=Math.round(i.height/t.pageHeight*100);if(f.css({display:"block",cursor:"pointer",position:"absolute",top:h+"%",left:c+"%",width:l+"%",height:a+"%","background-color":i.color,color:i.fontColor,"font-size":i.fontSize,opacity:i.opacity}),f.attr("target",i.target),f.attr("title",i.rolloverText),f.bind(n.mouseEvents.over,function(){f.css({"background-color":i.rolloverColor,opacity:i.rolloverOpacity})}).bind(n.mouseEvents.out,function(){f.css({"background-color":i.color,opacity:i.opacity})}),i.clickSound=="true")f.on("click",function(){nt.playClickSound()});if(o.append(f),i.type=="audio")f.on("click",function(){g.showAudioPlayer(i.destination,"audio_"+r+"_"+u,u,r)});else if(i.type=="video")f.on("click",function(){g.showVideoPlayer(i.destination,i.youtubeId,i.popupWidth,i.popupHeight,"video_"+r+"_"+u)});else if(i.type=="image")f.on("click",function(){g.showPictureViewer(i.destination,"image_"+r+"_"+u)});else if(i.type=="message")f.on("click",function(){g.showMessageViewer(i.text,i.popupWidth,i.popupHeight,i.windowColor,"message_"+r+"_"+u)});else if(i.destination&&i.destination.indexOf("page:")!=-1){s=parseInt(i.destination.replace("page:",""));f.on("click",function(){e.turn("page",s)})}else f.attr("href",i.destination)}},addVideos:function(i,r,u){var o=n(".pageLayer[page='"+r+"']"),h;if(!(o.length<=0)){var s=e.turn("size"),c=s.width/2,l=s.height,f=n("<a />");f.css({display:"block",cursor:"pointer",position:"absolute",top:Math.round(i.y/t.pageHeight*100)+"%",left:Math.round(i.x/t.pageWidth*100)+"%",width:Math.round(i.width/t.pageWidth*100)+"%",height:Math.round(i.height/t.pageHeight*100)+"%"});h=g.showVideoPlayerInPage(i.url,i.youtubeId,i.autoPlay,i.autoRepeat,i.showControl,i.stopWhenFlip,"video_"+r+"_"+u);f.append(h);o.append(f)}},addSlideshows:function(i,r,u){var o=n(".pageLayer[page='"+r+"']"),h;if(!(o.length<=0)){var s=e.turn("size"),c=s.width/2,l=s.height,f=n("<a />");f.css({display:"block",cursor:"pointer",position:"absolute",top:Math.round(i.y/t.pageHeight*100)+"%",left:Math.round(i.x/t.pageWidth*100)+"%",width:Math.round(i.width/t.pageWidth*100)+"%",height:Math.round(i.height/t.pageHeight*100)+"%","background-color":i.bgColor});h=g.showSlideshowPlayerInPage(i.picList,i.time,i.bgColor,i.ctrlBarAlpha,"slideshow_"+r+"_"+u);f.append(h);o.append(f)}},addPageSounds:function(t,i,r){var u=n(".pageLayer[page='"+i+"']");u.length<=0||g.showAudioPlayerInPage(t.url,"pagesound_"+i+"_"+r,r,i,t.repeat,t.hideControlBar)},addNotes:function(t,i){var r=n(".pageLayer[page='"+i+"']");if(!(r.length<=0)){var f=e.turn("size"),o=f.width/2,s=f.height,u=n("<a />");u.attr("class","positionElement_note");u.css({display:"block",cursor:"pointer",background:"url('images/btnNote.cur') no-repeat 100% 100%",position:"absolute",top:Math.round(t.y/r.height()*100)+"%",left:Math.round(t.x/r.width()*100)+"%",width:Math.round(t.width/r.width()*100)+"%",height:Math.round(t.height/r.height()*100)+"%"});r.append(u);u.on("click",function(){it.showNoteDialog(t)})}},addHighlights:function(t,i){var r=n(".pageLayer[page='"+i+"']");if(!(r.length<=0)){var f=e.turn("size"),o=f.width/2,s=f.height,u=n("<a />");u.attr("class","positionElement_highlight");u.css({display:"block",cursor:"pointer",position:"absolute",top:Math.round(t.y/r.height()*100)+"%",left:Math.round(t.x/r.width()*100)+"%",width:Math.round(t.width/r.width()*100)+"%",height:Math.round(t.height/r.height()*100)+"%","background-color":t.color,opacity:"0.5"});u.attr("title",t.content);r.append(u);u.on("click",function(){it.showHighlightDialog(t)})}}},g={slideshowTimers:[],pageSoundDialogs:[],destroyPageElement:function(){for(var i,t=0;t<g.slideshowTimers.length;t++)clearInterval(g.slideshowTimers[t]);for(g.slideshowTimers=[],i=0;i<g.pageSoundDialogs.length;i++)g.pageSoundDialogs[i].dialog("close");g.pageSoundDialogs=[];n("#leftPage").empty();n("#rightPage").empty()},showAudioPlayer:function(n,t,i,r){it.showAudioPlayerDialog(n,t,i,r,!1,!0,!1)},showVideoPlayer:function(n,t,i,r,u){it.showVideoPlayerDialog(n,t,i,r,u)},showPictureViewer:function(n,t){it.showPictureViewerDialog(n,t)},showMessageViewer:function(n,t,i,r,u){it.showMessageViewerDialog(n,t,i,r,u)},showAudioPlayerInPage:function(n,t,i,r,u,f){it.showAudioPlayerDialog(n,t,i,r,u,f,!1)},showVideoPlayerInPage:function(t,i,r,u,f,e,o){if(!(n("#"+o).length>0)){var s;if(i)s=n("<iframe/>"),s.css({width:"100%",height:"100%","object-fit":"fill",frameborder:"0","background-color":"#000000"}),s.attr("id",o),s.attr("src","http://www.youtube.com/embed/"+i+"?html5=1");else{if(i=="")return;s=n("<video/>");s.css({width:"100%",height:"100%","object-fit":"fill","background-color":"#000000"});s.attr("id",o);s.attr("preload","none");s.attr("src",t);r&&s.attr("autoplay","autoplay");u&&s.attr("loop","loop");f&&s.attr("controls","controls")}return s}},showPictureViewerInPage:function(t,i){if(!(n("#"+i).length>0)){var r=n("<img/>");return r.attr("id",i),r.attr("src",t),r.attr("draggable","false"),r.css("cursor","default"),r.css({width:"100%",height:"100%"}),r}},showSwfPlayerInPage:function(t,i){if(!(n("#"+i).length>0)){var r=n("<div/>");return r.attr("id",i),r.flash({swf:t,wmode:"transparent",width:"100%",height:"100%"}),r}},showSlideshowPlayerInPage:function(t,i,r,u,f){var k,e,s,w,c,h,d,l,o,a,v,nt,b,y;if(!(n("#"+f).length>0)){for(e=0,r||(r="#000"),s=n("<div/>"),s.attr("id",f),s.css({position:"relative",width:"100%",height:"100%","background-color":r}),w=n("<a/>"),w.css({display:"inline-block",position:"absolute",top:"0",width:"100%",height:"90%"}),s.append(w),c=n("<img/>"),c.attr("draggable","false"),c.css({width:"100%",height:"100%"}),s.append(c),h=n("<div/>"),h.addClass("controls"),h.css({"background-color":"rgba(0, 0, 0, "+u+")",overflow:"hidden"}),d=n("<span/>"),l=n("<img/>"),l.attr("src",cr),l.css({width:"10%",height:"75%"}),o=n("<img/>"),o.attr("src",ci),o.css({width:"10%",height:"75%"}),a=n("<img/>"),a.attr("src",lr),a.css({width:"10%",height:"75%"}),v=n("<img/>"),v.attr("src",vr),v.css({width:"10%",height:"75%"}),h.append(d),h.append(l),h.append(o),h.append(a),h.append(v),s.append(h),nt=[],b=[],y=0;y<t.length;y++)nt.push(t[y].url),b.push(t[y].href);var p=function(n){e<=0&&(e=0);e>=t.length-1&&(e=t.length-1);c.attr("src",nt[n]);b[n]?s.css("cursor","pointer"):s.css("cursor","default");w.attr("href",b[e]);d.text(e+1+"/"+t.length)},it=function(){o.attr("src",ci);o.off();o.on("click",function(){tt()});k=setInterval(function(){console.log("showPic");c.fadeOut("slow",function(){e>=t.length?e=0:e++;p(e);c.fadeIn("slow")})},parseInt(i)*1e3);g.slideshowTimers.push(k)},tt=function(){o.attr("src",ar);clearInterval(k);o.off();o.on("click",function(){s.play()})},rt=function(){e++;p(e)},ut=function(){e--;p(e)},ft=function(){e=0;p(e)};p(e);it();l.on("click",function(){ut()});o.off();o.on("click",function(){tt()});a.on("click",function(){rt()});v.on("click",function(){ft()});return s}}}})(jQuery);